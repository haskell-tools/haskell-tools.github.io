<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DeriveGeneric
           , OverloadedStrings
           , DeriveAnyClass
           #-}</span><span>
</span><a name="line-5"></a><span class="hs-comment">-- | This module declares the messages that can be sent from the client to the</span><span>
</span><a name="line-6"></a><span class="hs-comment">-- daemon engine and from the engine to the client.</span><span>
</span><a name="line-7"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Language</span><span class="hs-operator">.</span><span class="hs-identifier">Haskell</span><span class="hs-operator">.</span><span class="hs-identifier">Tools</span><span class="hs-operator">.</span><span class="hs-identifier">Daemon</span><span class="hs-operator">.</span><span class="hs-identifier">Protocol</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-8"></a><span>
</span><a name="line-9"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control</span><span class="hs-operator">.</span><span class="hs-identifier">DeepSeq</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">NFData</span><span class="hs-special">)</span><span>
</span><a name="line-10"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-identifier">Data</span><span class="hs-operator">.</span><span class="hs-identifier">Aeson</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">A</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-operator hs-var">.=</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-11"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data</span><span class="hs-operator">.</span><span class="hs-identifier">Aeson</span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-operator hs-var">.=</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-12"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">GHC</span><span class="hs-operator">.</span><span class="hs-identifier">Generics</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Generic</span><span class="hs-special">)</span><span>
</span><a name="line-13"></a><span>
</span><a name="line-14"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">FastString</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">unpackFS</span><span class="hs-special">)</span><span>
</span><a name="line-15"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">SrcLoc</span><span>
</span><a name="line-16"></a><span>
</span><a name="line-17"></a><span class="hs-keyword">import</span><span> </span><a href="Language.Haskell.Tools.Daemon.PackageDB.html"><span class="hs-identifier">Language</span><span class="hs-operator">.</span><span class="hs-identifier">Haskell</span><span class="hs-operator">.</span><span class="hs-identifier">Tools</span><span class="hs-operator">.</span><span class="hs-identifier">Daemon</span><span class="hs-operator">.</span><span class="hs-identifier">PackageDB</span></a><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.Daemon.PackageDB.html#PackageDB"><span class="hs-identifier hs-type">PackageDB</span></a><span class="hs-special">)</span><span>
</span><a name="line-18"></a><span>
</span><a name="line-19"></a><span class="hs-comment">-- | The messages expected from the client.</span><span>
</span><a name="line-20"></a><span class="hs-keyword">data</span><span> </span><a name="ClientMessage"><a href="Language.Haskell.Tools.Daemon.Protocol.html#ClientMessage"><span class="hs-identifier">ClientMessage</span></a></a><span>
</span><a name="line-21"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="KeepAlive"><a href="Language.Haskell.Tools.Daemon.Protocol.html#KeepAlive"><span class="hs-identifier">KeepAlive</span></a></a><span> </span><span class="hs-comment">-- ^ A simple ping message to check that the server is running.</span><span>
</span><a name="line-22"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="Reset"><a href="Language.Haskell.Tools.Daemon.Protocol.html#Reset"><span class="hs-identifier">Reset</span></a></a><span>
</span><a name="line-23"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="Handshake"><a href="Language.Haskell.Tools.Daemon.Protocol.html#Handshake"><span class="hs-identifier">Handshake</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="clientVersion"><a href="Language.Haskell.Tools.Daemon.Protocol.html#clientVersion"><span class="hs-identifier">clientVersion</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">Int</span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-24"></a><span>    </span><span class="hs-comment">-- ^ Tells the client version and asks the servers version.</span><span>
</span><a name="line-25"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="SetPackageDB"><a href="Language.Haskell.Tools.Daemon.Protocol.html#SetPackageDB"><span class="hs-identifier">SetPackageDB</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="pkgDB"><a href="Language.Haskell.Tools.Daemon.Protocol.html#pkgDB"><span class="hs-identifier">pkgDB</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Language.Haskell.Tools.Daemon.PackageDB.html#PackageDB"><span class="hs-identifier hs-type">PackageDB</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-26"></a><span>    </span><span class="hs-comment">-- ^ Sets the package database for the engine to use.</span><span>
</span><a name="line-27"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="AddPackages"><a href="Language.Haskell.Tools.Daemon.Protocol.html#AddPackages"><span class="hs-identifier">AddPackages</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="addedPathes"><a href="Language.Haskell.Tools.Daemon.Protocol.html#addedPathes"><span class="hs-identifier">addedPathes</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">FilePath</span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-28"></a><span>    </span><span class="hs-comment">-- ^ Registers packages to the engine. They will be subject to subsequent</span><span>
</span><a name="line-29"></a><span>    </span><span class="hs-comment">-- refactorings. Will cause the packages to be loaded, resulting in</span><span>
</span><a name="line-30"></a><span>    </span><span class="hs-comment">-- LoadingModules, LoadedModules or CompilationProblem responses.</span><span>
</span><a name="line-31"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="RemovePackages"><a href="Language.Haskell.Tools.Daemon.Protocol.html#RemovePackages"><span class="hs-identifier">RemovePackages</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="removedPathes"><a href="Language.Haskell.Tools.Daemon.Protocol.html#removedPathes"><span class="hs-identifier">removedPathes</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">FilePath</span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-32"></a><span>    </span><span class="hs-comment">-- ^ Deregisters the given packages from the engine. They will not be</span><span>
</span><a name="line-33"></a><span>    </span><span class="hs-comment">-- subjects of further refactorings.</span><span>
</span><a name="line-34"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="SetWorkingDir"><a href="Language.Haskell.Tools.Daemon.Protocol.html#SetWorkingDir"><span class="hs-identifier">SetWorkingDir</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="newWorkingDir"><a href="Language.Haskell.Tools.Daemon.Protocol.html#newWorkingDir"><span class="hs-identifier">newWorkingDir</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-35"></a><span>    </span><span class="hs-comment">-- ^ Sets the working directory for the compilation. Important when</span><span>
</span><a name="line-36"></a><span>    </span><span class="hs-comment">-- compiling code that loads resources based on relative pathes.</span><span>
</span><a name="line-37"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="SetGHCFlags"><a href="Language.Haskell.Tools.Daemon.Protocol.html#SetGHCFlags"><span class="hs-identifier">SetGHCFlags</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="ghcFlags"><a href="Language.Haskell.Tools.Daemon.Protocol.html#ghcFlags"><span class="hs-identifier">ghcFlags</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">String</span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-38"></a><span>    </span><span class="hs-comment">-- ^ Sets the compilation flags. The unused flags are returned via the</span><span>
</span><a name="line-39"></a><span>    </span><span class="hs-comment">-- UnusedFlags response.</span><span>
</span><a name="line-40"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="PerformRefactoring"><a href="Language.Haskell.Tools.Daemon.Protocol.html#PerformRefactoring"><span class="hs-identifier">PerformRefactoring</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="refactoring"><a href="Language.Haskell.Tools.Daemon.Protocol.html#refactoring"><span class="hs-identifier">refactoring</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-41"></a><span>                       </span><span class="hs-special">,</span><span> </span><a name="modulePath"><a href="Language.Haskell.Tools.Daemon.Protocol.html#modulePath"><span class="hs-identifier">modulePath</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span>
</span><a name="line-42"></a><span>                       </span><span class="hs-special">,</span><span> </span><a name="editorSelection"><a href="Language.Haskell.Tools.Daemon.Protocol.html#editorSelection"><span class="hs-identifier">editorSelection</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-43"></a><span>                       </span><span class="hs-special">,</span><span> </span><a name="details"><a href="Language.Haskell.Tools.Daemon.Protocol.html#details"><span class="hs-identifier">details</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">String</span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- ^ Additional details for the refactoring like the</span><span>
</span><a name="line-44"></a><span>                                             </span><span class="hs-comment">-- names of generated definitions.</span><span>
</span><a name="line-45"></a><span>                       </span><span class="hs-special">,</span><span> </span><a name="shutdownAfter"><a href="Language.Haskell.Tools.Daemon.Protocol.html#shutdownAfter"><span class="hs-identifier">shutdownAfter</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Bool</span><span> </span><span class="hs-comment">-- ^ Stop the daemon after performing the refactoring.</span><span>
</span><a name="line-46"></a><span>                       </span><span class="hs-special">,</span><span> </span><a name="diffMode"><a href="Language.Haskell.Tools.Daemon.Protocol.html#diffMode"><span class="hs-identifier">diffMode</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Bool</span><span> </span><span class="hs-comment">-- ^ Don't change the files, send back the result as</span><span>
</span><a name="line-47"></a><span>                                          </span><span class="hs-comment">-- a unified diff.</span><span>
</span><a name="line-48"></a><span>                       </span><span class="hs-special">}</span><span>
</span><a name="line-49"></a><span>    </span><span class="hs-comment">-- ^ Orders the engine to perform the refactoring on the module given</span><span>
</span><a name="line-50"></a><span>    </span><span class="hs-comment">-- with the selection and details. Successful refactorings will cause re-loading of modules.</span><span>
</span><a name="line-51"></a><span>    </span><span class="hs-comment">-- If 'shutdownAfter' or 'diffMode' is not set, after the refactoring,</span><span>
</span><a name="line-52"></a><span>    </span><span class="hs-comment">-- modules are re-loaded, LoadingModules, LoadedModules responses are sent.</span><span>
</span><a name="line-53"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="UndoLast"><a href="Language.Haskell.Tools.Daemon.Protocol.html#UndoLast"><span class="hs-identifier">UndoLast</span></a></a><span>
</span><a name="line-54"></a><span>    </span><span class="hs-comment">-- ^ Asks the daemon to undo the last refactoring.</span><span>
</span><a name="line-55"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="Disconnect"><a href="Language.Haskell.Tools.Daemon.Protocol.html#Disconnect"><span class="hs-identifier">Disconnect</span></a></a><span>
</span><a name="line-56"></a><span>    </span><span class="hs-comment">-- ^ Stops the engine. It replies with Disconnected.</span><span>
</span><a name="line-57"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="ReLoad"><a href="Language.Haskell.Tools.Daemon.Protocol.html#ReLoad"><span class="hs-identifier">ReLoad</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="addedModules"><a href="Language.Haskell.Tools.Daemon.Protocol.html#addedModules"><span class="hs-identifier">addedModules</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">FilePath</span><span class="hs-special">]</span><span>
</span><a name="line-58"></a><span>           </span><span class="hs-special">,</span><span> </span><a name="changedModules"><a href="Language.Haskell.Tools.Daemon.Protocol.html#changedModules"><span class="hs-identifier">changedModules</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">FilePath</span><span class="hs-special">]</span><span>
</span><a name="line-59"></a><span>           </span><span class="hs-special">,</span><span> </span><a name="removedModules"><a href="Language.Haskell.Tools.Daemon.Protocol.html#removedModules"><span class="hs-identifier">removedModules</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">FilePath</span><span class="hs-special">]</span><span>
</span><a name="line-60"></a><span>           </span><span class="hs-special">}</span><span>
</span><a name="line-61"></a><span>    </span><span class="hs-comment">-- ^ Instructs the engine to re-load a changed module.</span><span>
</span><a name="line-62"></a><span>    </span><span class="hs-comment">-- LoadingModules, LoadedModules responses may be sent.</span><span>
</span><a name="line-63"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="Stop"><a href="Language.Haskell.Tools.Daemon.Protocol.html#Stop"><span class="hs-identifier">Stop</span></a></a><span> </span><span class="hs-comment">-- TODO: remove</span><span>
</span><a name="line-64"></a><span>    </span><span class="hs-comment">-- ^ Stops the server. OBSOLATE</span><span>
</span><a name="line-65"></a><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Show</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Generic</span><span class="hs-special">)</span><span>
</span><a name="line-66"></a><span>
</span><a name="line-67"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">FromJSON</span><span> </span><a href="Language.Haskell.Tools.Daemon.Protocol.html#ClientMessage"><span class="hs-identifier hs-type">ClientMessage</span></a><span>
</span><a name="line-68"></a><span>
</span><a name="line-69"></a><span class="hs-comment">-- | The possible responses that the server can give.</span><span>
</span><a name="line-70"></a><span class="hs-keyword">data</span><span> </span><a name="ResponseMsg"><a href="Language.Haskell.Tools.Daemon.Protocol.html#ResponseMsg"><span class="hs-identifier">ResponseMsg</span></a></a><span>
</span><a name="line-71"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="KeepAliveResponse"><a href="Language.Haskell.Tools.Daemon.Protocol.html#KeepAliveResponse"><span class="hs-identifier">KeepAliveResponse</span></a></a><span> </span><span class="hs-comment">-- ^ A response to KeepAlive</span><span>
</span><a name="line-72"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="HandshakeResponse"><a href="Language.Haskell.Tools.Daemon.Protocol.html#HandshakeResponse"><span class="hs-identifier">HandshakeResponse</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="serverVersion"><a href="Language.Haskell.Tools.Daemon.Protocol.html#serverVersion"><span class="hs-identifier">serverVersion</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">Int</span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-73"></a><span>    </span><span class="hs-comment">-- ^ Tells the version of the server.</span><span>
</span><a name="line-74"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="ErrorMessage"><a href="Language.Haskell.Tools.Daemon.Protocol.html#ErrorMessage"><span class="hs-identifier">ErrorMessage</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="errorMsg"><a href="Language.Haskell.Tools.Daemon.Protocol.html#errorMsg"><span class="hs-identifier">errorMsg</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-75"></a><span>    </span><span class="hs-comment">-- ^ An error message marking internal problems or user mistakes.</span><span>
</span><a name="line-76"></a><span>    </span><span class="hs-comment">-- TODO: separate internal problems and user mistakes.</span><span>
</span><a name="line-77"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="CompilationProblem"><a href="Language.Haskell.Tools.Daemon.Protocol.html#CompilationProblem"><span class="hs-identifier">CompilationProblem</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="errorMarkers"><a href="Language.Haskell.Tools.Daemon.Protocol.html#errorMarkers"><span class="hs-identifier">errorMarkers</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="hs-identifier hs-type">SrcSpan</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">String</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><a name="line-78"></a><span>                       </span><span class="hs-special">,</span><span> </span><a name="errorHints"><a href="Language.Haskell.Tools.Daemon.Protocol.html#errorHints"><span class="hs-identifier">errorHints</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">String</span><span class="hs-special">]</span><span>
</span><a name="line-79"></a><span>                       </span><span class="hs-special">}</span><span>
</span><a name="line-80"></a><span>    </span><span class="hs-comment">-- ^ A response that tells there are errors in the source code given.</span><span>
</span><a name="line-81"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="DiffInfo"><a href="Language.Haskell.Tools.Daemon.Protocol.html#DiffInfo"><span class="hs-identifier">DiffInfo</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="diffInfo"><a href="Language.Haskell.Tools.Daemon.Protocol.html#diffInfo"><span class="hs-identifier">diffInfo</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-82"></a><span>    </span><span class="hs-comment">-- ^ Information about changes that would be caused by the refactoring.</span><span>
</span><a name="line-83"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="LoadingModules"><a href="Language.Haskell.Tools.Daemon.Protocol.html#LoadingModules"><span class="hs-identifier">LoadingModules</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="modulesToLoad"><a href="Language.Haskell.Tools.Daemon.Protocol.html#modulesToLoad"><span class="hs-identifier">modulesToLoad</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">FilePath</span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-84"></a><span>    </span><span class="hs-comment">-- ^ The traversal of the project is done, now the engine is loading the</span><span>
</span><a name="line-85"></a><span>    </span><span class="hs-comment">-- given modules.</span><span>
</span><a name="line-86"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="LoadedModules"><a href="Language.Haskell.Tools.Daemon.Protocol.html#LoadedModules"><span class="hs-identifier">LoadedModules</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="loadedModules"><a href="Language.Haskell.Tools.Daemon.Protocol.html#loadedModules"><span class="hs-identifier">loadedModules</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="hs-identifier hs-type">FilePath</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">String</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-87"></a><span>    </span><span class="hs-comment">-- ^ The engine has loaded the given module.</span><span>
</span><a name="line-88"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="UnusedFlags"><a href="Language.Haskell.Tools.Daemon.Protocol.html#UnusedFlags"><span class="hs-identifier">UnusedFlags</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="unusedFlags"><a href="Language.Haskell.Tools.Daemon.Protocol.html#unusedFlags"><span class="hs-identifier">unusedFlags</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">String</span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-89"></a><span>    </span><span class="hs-comment">-- ^ Returns the flags that are not used by the engine.</span><span>
</span><a name="line-90"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="Disconnected"><a href="Language.Haskell.Tools.Daemon.Protocol.html#Disconnected"><span class="hs-identifier">Disconnected</span></a></a><span>
</span><a name="line-91"></a><span>    </span><span class="hs-comment">-- ^ The engine has closed the connection.</span><span>
</span><a name="line-92"></a><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Show</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Generic</span><span class="hs-special">)</span><span>
</span><a name="line-93"></a><span>
</span><a name="line-94"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">ToJSON</span><span> </span><a href="Language.Haskell.Tools.Daemon.Protocol.html#ResponseMsg"><span class="hs-identifier hs-type">ResponseMsg</span></a><span>
</span><a name="line-95"></a><span>
</span><a name="line-96"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">ToJSON</span><span> </span><span class="hs-identifier hs-type">SrcSpan</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-97"></a><span>  </span><a name="local-8214565720323894077"><span class="hs-identifier">toJSON</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">RealSrcSpan</span><span> </span><a name="local-6989586621679167020"><a href="#local-6989586621679167020"><span class="hs-identifier">sp</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">object</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-string">&quot;file&quot;</span><span> </span><span class="hs-identifier hs-var">A</span><span class="hs-operator hs-var">..=</span><span> </span><span class="hs-identifier hs-var">unpackFS</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">srcSpanFile</span><span> </span><a href="#local-6989586621679167020"><span class="hs-identifier hs-var">sp</span></a><span class="hs-special">)</span><span>
</span><a name="line-98"></a><span>                                   </span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;startRow&quot;</span><span> </span><span class="hs-identifier hs-var">A</span><span class="hs-operator hs-var">..=</span><span> </span><span class="hs-identifier hs-var">srcLocLine</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">realSrcSpanStart</span><span> </span><a href="#local-6989586621679167020"><span class="hs-identifier hs-var">sp</span></a><span class="hs-special">)</span><span>
</span><a name="line-99"></a><span>                                   </span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;startCol&quot;</span><span> </span><span class="hs-identifier hs-var">A</span><span class="hs-operator hs-var">..=</span><span> </span><span class="hs-identifier hs-var">srcLocCol</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">realSrcSpanStart</span><span> </span><a href="#local-6989586621679167020"><span class="hs-identifier hs-var">sp</span></a><span class="hs-special">)</span><span>
</span><a name="line-100"></a><span>                                   </span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;endRow&quot;</span><span> </span><span class="hs-identifier hs-var">A</span><span class="hs-operator hs-var">..=</span><span> </span><span class="hs-identifier hs-var">srcLocLine</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">realSrcSpanEnd</span><span> </span><a href="#local-6989586621679167020"><span class="hs-identifier hs-var">sp</span></a><span class="hs-special">)</span><span>
</span><a name="line-101"></a><span>                                   </span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;endCol&quot;</span><span> </span><span class="hs-identifier hs-var">A</span><span class="hs-operator hs-var">..=</span><span> </span><span class="hs-identifier hs-var">srcLocCol</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">realSrcSpanEnd</span><span> </span><a href="#local-6989586621679167020"><span class="hs-identifier hs-var">sp</span></a><span class="hs-special">)</span><span>
</span><a name="line-102"></a><span>                                   </span><span class="hs-special">]</span><span>
</span><a name="line-103"></a><span>  </span><span class="hs-identifier">toJSON</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Null</span><span>
</span><a name="line-104"></a><span>
</span><a name="line-105"></a><span class="hs-keyword">data</span><span> </span><a name="UndoRefactor"><a href="Language.Haskell.Tools.Daemon.Protocol.html#UndoRefactor"><span class="hs-identifier">UndoRefactor</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="RemoveAdded"><a href="Language.Haskell.Tools.Daemon.Protocol.html#RemoveAdded"><span class="hs-identifier">RemoveAdded</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="undoRemovePath"><a href="Language.Haskell.Tools.Daemon.Protocol.html#undoRemovePath"><span class="hs-identifier">undoRemovePath</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-106"></a><span>                  </span><span class="hs-glyph">|</span><span> </span><a name="RestoreRemoved"><a href="Language.Haskell.Tools.Daemon.Protocol.html#RestoreRemoved"><span class="hs-identifier">RestoreRemoved</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="undoRestorePath"><a href="Language.Haskell.Tools.Daemon.Protocol.html#undoRestorePath"><span class="hs-identifier">undoRestorePath</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span>
</span><a name="line-107"></a><span>                                   </span><span class="hs-special">,</span><span> </span><a name="undoRestoreContents"><a href="Language.Haskell.Tools.Daemon.Protocol.html#undoRestoreContents"><span class="hs-identifier">undoRestoreContents</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-108"></a><span>                                   </span><span class="hs-special">}</span><span>
</span><a name="line-109"></a><span>                  </span><span class="hs-glyph">|</span><span> </span><a name="UndoChanges"><a href="Language.Haskell.Tools.Daemon.Protocol.html#UndoChanges"><span class="hs-identifier">UndoChanges</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="undoChangedPath"><a href="Language.Haskell.Tools.Daemon.Protocol.html#undoChangedPath"><span class="hs-identifier">undoChangedPath</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span>
</span><a name="line-110"></a><span>                                </span><span class="hs-special">,</span><span> </span><a name="undoDiff"><a href="Language.Haskell.Tools.Daemon.Protocol.html#undoDiff"><span class="hs-identifier">undoDiff</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Language.Haskell.Tools.Daemon.Protocol.html#FileDiff"><span class="hs-identifier hs-type">FileDiff</span></a><span>
</span><a name="line-111"></a><span>                                </span><span class="hs-special">}</span><span>
</span><a name="line-112"></a><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Show</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Generic</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">NFData</span><span class="hs-special">)</span><span>
</span><a name="line-113"></a><span>
</span><a name="line-114"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">ToJSON</span><span> </span><a href="Language.Haskell.Tools.Daemon.Protocol.html#UndoRefactor"><span class="hs-identifier hs-type">UndoRefactor</span></a><span>
</span><a name="line-115"></a><span>
</span><a name="line-116"></a><span class="hs-keyword">type</span><span> </span><a name="FileDiff"><a href="Language.Haskell.Tools.Daemon.Protocol.html#FileDiff"><span class="hs-identifier">FileDiff</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="hs-identifier hs-type">Int</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Int</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">String</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><a name="line-117"></a></pre></body></html>