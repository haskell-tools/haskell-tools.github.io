<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Language.Haskell.Tools.Daemon</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Language.Haskell.Tools.Daemon.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">haskell-tools-daemon-0.9.0.0: Background process for Haskell-tools that editors can connect to.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Language.Haskell.Tools.Daemon</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>The central module for the background process of Haskell-tools. Starts the daemon process and
 updates it for each client request in a loop. After this releases the resources and terminates.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:runDaemon-39-">runDaemon'</a> :: [<a href="../haskell-tools-refactor-0.9.0.0/Language-Haskell-Tools-Refactor-Refactoring.html#t:RefactoringChoice">RefactoringChoice</a> <a href="../haskell-tools-ast-0.9.0.0/Language-Haskell-Tools-AST-Ann.html#t:IdDom">IdDom</a>] -&gt; <a href="Language-Haskell-Tools-Daemon.html#t:DaemonOptions">DaemonOptions</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:DaemonOptions">DaemonOptions</a> = <a href="#v:DaemonOptions">DaemonOptions</a> {<ul class="subs"><li><a href="#v:daemonVersion">daemonVersion</a> :: <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a></li><li><a href="#v:portNumber">portNumber</a> :: <a href="../base-4.10.0.0/Data-Int.html#t:Int">Int</a></li><li><a href="#v:silentMode">silentMode</a> :: <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a></li><li><a href="#v:noWatch">noWatch</a> :: <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a></li><li><a href="#v:watchExe">watchExe</a> :: <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../base-4.10.0.0/System-IO.html#t:FilePath">FilePath</a></li></ul>}</li><li class="src short"><a href="#v:runDaemon">runDaemon</a> :: [<a href="../haskell-tools-refactor-0.9.0.0/Language-Haskell-Tools-Refactor-Refactoring.html#t:RefactoringChoice">RefactoringChoice</a> <a href="../haskell-tools-ast-0.9.0.0/Language-Haskell-Tools-AST-Ann.html#t:IdDom">IdDom</a>] -&gt; <a href="Language-Haskell-Tools-Daemon-Mode.html#t:WorkingMode">WorkingMode</a> a -&gt; <a href="../base-4.10.0.0/Control-Concurrent-MVar.html#t:MVar">MVar</a> a -&gt; <a href="Language-Haskell-Tools-Daemon.html#t:DaemonOptions">DaemonOptions</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:serverLoop">serverLoop</a> :: [<a href="../haskell-tools-refactor-0.9.0.0/Language-Haskell-Tools-Refactor-Refactoring.html#t:RefactoringChoice">RefactoringChoice</a> <a href="../haskell-tools-ast-0.9.0.0/Language-Haskell-Tools-AST-Ann.html#t:IdDom">IdDom</a>] -&gt; <a href="Language-Haskell-Tools-Daemon-Mode.html#t:WorkingMode">WorkingMode</a> a -&gt; a -&gt; <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="../ghc-8.2.1/GhcMonad.html#t:Session">Session</a> -&gt; <a href="../base-4.10.0.0/Control-Concurrent-MVar.html#t:MVar">MVar</a> <a href="Language-Haskell-Tools-Daemon-State.html#t:DaemonSessionState">DaemonSessionState</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:respondTo">respondTo</a> :: [<a href="../haskell-tools-refactor-0.9.0.0/Language-Haskell-Tools-Refactor-Refactoring.html#t:RefactoringChoice">RefactoringChoice</a> <a href="../haskell-tools-ast-0.9.0.0/Language-Haskell-Tools-AST-Ann.html#t:IdDom">IdDom</a>] -&gt; <a href="../ghc-8.2.1/GhcMonad.html#t:Session">Session</a> -&gt; <a href="../base-4.10.0.0/Control-Concurrent-MVar.html#t:MVar">MVar</a> <a href="Language-Haskell-Tools-Daemon-State.html#t:DaemonSessionState">DaemonSessionState</a> -&gt; (<a href="Language-Haskell-Tools-Daemon-Protocol.html#t:ResponseMsg">ResponseMsg</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> ()) -&gt; <a href="Language-Haskell-Tools-Daemon-Protocol.html#t:ClientMessage">ClientMessage</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:userExceptionHandlers">userExceptionHandlers</a> :: (<a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a>) -&gt; ([(<a href="../ghc-8.2.1/SrcLoc.html#t:SrcSpan">SrcSpan</a>, <a href="../base-4.10.0.0/Data-String.html#t:String">String</a>)] -&gt; [<a href="../base-4.10.0.0/Data-String.html#t:String">String</a>] -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a>) -&gt; [<a href="../base-4.10.0.0/Control-Exception.html#t:Handler">Handler</a> <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a>]</li><li class="src short"><a href="#v:exceptionHandlers">exceptionHandlers</a> :: <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> () -&gt; (<a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> ()) -&gt; [<a href="../base-4.10.0.0/Control-Exception.html#t:Handler">Handler</a> ()]</li><li class="src short"><a href="#v:handleGHCException">handleGHCException</a> :: <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="../base-4.10.0.0/Data-String.html#t:String">String</a>, <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a>)</li><li class="src short"><a href="#v:handleSourceProblem">handleSourceProblem</a> :: <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../base-4.10.0.0/Data-String.html#t:String">String</a></li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:runDaemon-39-" class="def">runDaemon'</a> :: [<a href="../haskell-tools-refactor-0.9.0.0/Language-Haskell-Tools-Refactor-Refactoring.html#t:RefactoringChoice">RefactoringChoice</a> <a href="../haskell-tools-ast-0.9.0.0/Language-Haskell-Tools-AST-Ann.html#t:IdDom">IdDom</a>] -&gt; <a href="Language-Haskell-Tools-Daemon.html#t:DaemonOptions">DaemonOptions</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> () <a href="src/Language.Haskell.Tools.Daemon.html#runDaemon%27" class="link">Source</a> <a href="#v:runDaemon-39-" class="selflink">#</a></p><div class="doc"><p>Starts the daemon process. This will not return until the daemon stops. You can use this entry
 point when the other endpoint of the client connection is not needed, for example, when you use
 socket connection to connect to the daemon process.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:DaemonOptions" class="def">DaemonOptions</a> <a href="src/Language.Haskell.Tools.Daemon.html#DaemonOptions" class="link">Source</a> <a href="#t:DaemonOptions" class="selflink">#</a></p><div class="doc"><p>Command line options for the daemon process.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:DaemonOptions" class="def">DaemonOptions</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:daemonVersion" class="def">daemonVersion</a> :: <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:portNumber" class="def">portNumber</a> :: <a href="../base-4.10.0.0/Data-Int.html#t:Int">Int</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:silentMode" class="def">silentMode</a> :: <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:noWatch" class="def">noWatch</a> :: <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:watchExe" class="def">watchExe</a> :: <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../base-4.10.0.0/System-IO.html#t:FilePath">FilePath</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:runDaemon" class="def">runDaemon</a> :: [<a href="../haskell-tools-refactor-0.9.0.0/Language-Haskell-Tools-Refactor-Refactoring.html#t:RefactoringChoice">RefactoringChoice</a> <a href="../haskell-tools-ast-0.9.0.0/Language-Haskell-Tools-AST-Ann.html#t:IdDom">IdDom</a>] -&gt; <a href="Language-Haskell-Tools-Daemon-Mode.html#t:WorkingMode">WorkingMode</a> a -&gt; <a href="../base-4.10.0.0/Control-Concurrent-MVar.html#t:MVar">MVar</a> a -&gt; <a href="Language-Haskell-Tools-Daemon.html#t:DaemonOptions">DaemonOptions</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> () <a href="src/Language.Haskell.Tools.Daemon.html#runDaemon" class="link">Source</a> <a href="#v:runDaemon" class="selflink">#</a></p><div class="doc"><p>Starts the daemon process. This will not return until the daemon stops.
 The daemon process is parameterized by the refactorings you can use in it. This entry point gives
 back the other endpoint of the connection so it can be used to run the daemon in the same process.</p></div></div><div class="top"><p class="src"><a id="v:serverLoop" class="def">serverLoop</a> :: [<a href="../haskell-tools-refactor-0.9.0.0/Language-Haskell-Tools-Refactor-Refactoring.html#t:RefactoringChoice">RefactoringChoice</a> <a href="../haskell-tools-ast-0.9.0.0/Language-Haskell-Tools-AST-Ann.html#t:IdDom">IdDom</a>] -&gt; <a href="Language-Haskell-Tools-Daemon-Mode.html#t:WorkingMode">WorkingMode</a> a -&gt; a -&gt; <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="../ghc-8.2.1/GhcMonad.html#t:Session">Session</a> -&gt; <a href="../base-4.10.0.0/Control-Concurrent-MVar.html#t:MVar">MVar</a> <a href="Language-Haskell-Tools-Daemon-State.html#t:DaemonSessionState">DaemonSessionState</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> () <a href="src/Language.Haskell.Tools.Daemon.html#serverLoop" class="link">Source</a> <a href="#v:serverLoop" class="selflink">#</a></p><div class="doc"><p>Starts the server loop, receiving requests from the client and updated the server state
 according to these.</p></div></div><div class="top"><p class="src"><a id="v:respondTo" class="def">respondTo</a> :: [<a href="../haskell-tools-refactor-0.9.0.0/Language-Haskell-Tools-Refactor-Refactoring.html#t:RefactoringChoice">RefactoringChoice</a> <a href="../haskell-tools-ast-0.9.0.0/Language-Haskell-Tools-AST-Ann.html#t:IdDom">IdDom</a>] -&gt; <a href="../ghc-8.2.1/GhcMonad.html#t:Session">Session</a> -&gt; <a href="../base-4.10.0.0/Control-Concurrent-MVar.html#t:MVar">MVar</a> <a href="Language-Haskell-Tools-Daemon-State.html#t:DaemonSessionState">DaemonSessionState</a> -&gt; (<a href="Language-Haskell-Tools-Daemon-Protocol.html#t:ResponseMsg">ResponseMsg</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> ()) -&gt; <a href="Language-Haskell-Tools-Daemon-Protocol.html#t:ClientMessage">ClientMessage</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/Language.Haskell.Tools.Daemon.html#respondTo" class="link">Source</a> <a href="#v:respondTo" class="selflink">#</a></p><div class="doc"><p>Responds to a client request by modifying the daemon and GHC state accordingly.</p></div></div><div class="top"><p class="src"><a id="v:userExceptionHandlers" class="def">userExceptionHandlers</a> :: (<a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a>) -&gt; ([(<a href="../ghc-8.2.1/SrcLoc.html#t:SrcSpan">SrcSpan</a>, <a href="../base-4.10.0.0/Data-String.html#t:String">String</a>)] -&gt; [<a href="../base-4.10.0.0/Data-String.html#t:String">String</a>] -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a>) -&gt; [<a href="../base-4.10.0.0/Control-Exception.html#t:Handler">Handler</a> <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a>] <a href="src/Language.Haskell.Tools.Daemon.html#userExceptionHandlers" class="link">Source</a> <a href="#v:userExceptionHandlers" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:exceptionHandlers" class="def">exceptionHandlers</a> :: <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> () -&gt; (<a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/System-IO.html#t:IO">IO</a> ()) -&gt; [<a href="../base-4.10.0.0/Control-Exception.html#t:Handler">Handler</a> ()] <a href="src/Language.Haskell.Tools.Daemon.html#exceptionHandlers" class="link">Source</a> <a href="#v:exceptionHandlers" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:handleGHCException" class="def">handleGHCException</a> :: <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="../base-4.10.0.0/Data-String.html#t:String">String</a>, <a href="../base-4.10.0.0/Data-Bool.html#t:Bool">Bool</a>) <a href="src/Language.Haskell.Tools.Daemon.html#handleGHCException" class="link">Source</a> <a href="#v:handleGHCException" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:handleSourceProblem" class="def">handleSourceProblem</a> :: <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../base-4.10.0.0/Data-String.html#t:String">String</a> <a href="src/Language.Haskell.Tools.Daemon.html#handleSourceProblem" class="link">Source</a> <a href="#v:handleSourceProblem" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.18.1</p></div></body></html>