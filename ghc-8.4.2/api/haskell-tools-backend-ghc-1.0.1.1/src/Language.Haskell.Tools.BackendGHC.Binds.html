<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE AllowAmbiguousTypes #-}</span><span>
</span><a name="line-2"></a><span class="hs-pragma">{-# LANGUAGE LambdaCase #-}</span><span>
</span><a name="line-3"></a><span class="hs-pragma">{-# LANGUAGE RankNTypes #-}</span><span>
</span><a name="line-4"></a><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><a name="line-5"></a><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><a name="line-6"></a><span class="hs-pragma">{-# LANGUAGE ViewPatterns #-}</span><span>
</span><a name="line-7"></a><span>
</span><a name="line-8"></a><span class="hs-comment">-- | Functions that convert the value and function definitions of the GHC AST to corresponding elements in the Haskell-tools AST representation</span><span>
</span><a name="line-9"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Language.Haskell.Tools.BackendGHC.Binds</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-10"></a><span>
</span><a name="line-11"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ApiAnnotation</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">GHC</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">AnnKeywordId</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-12"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Bag</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">GHC</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">bagToList</span><span class="hs-special">)</span><span>
</span><a name="line-13"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">BasicTypes</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">GHC</span><span>
</span><a name="line-14"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">HsBinds</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">GHC</span><span>
</span><a name="line-15"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">HsExpr</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">GHC</span><span>
</span><a name="line-16"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">HsPat</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">GHC</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">LPat</span><span class="hs-special">)</span><span>
</span><a name="line-17"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">HsTypes</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">GHC</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">SrcStrictness</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">HsWildCardBndrs</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">HsImplicitBndrs</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-18"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Name</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">GHC</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">isSymOcc</span><span class="hs-special">)</span><span>
</span><a name="line-19"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">PlaceHolder</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">GHC</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">NameOrRdrName</span><span class="hs-special">)</span><span>
</span><a name="line-20"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">SrcLoc</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">GHC</span><span>
</span><a name="line-21"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">HsExtension</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">IdP</span><span class="hs-special">)</span><span>
</span><a name="line-22"></a><span>
</span><a name="line-23"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Monad.Reader</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Monad</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">mapM</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">asks</span><span class="hs-special">)</span><span>
</span><a name="line-24"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.List</span><span>
</span><a name="line-25"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Function</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">on</span><span class="hs-special">)</span><span>
</span><a name="line-26"></a><span>
</span><a name="line-27"></a><span class="hs-keyword">import</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Exprs.html"><span class="hs-identifier">Language.Haskell.Tools.BackendGHC.Exprs</span></a><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Exprs.html#trfExpr"><span class="hs-identifier hs-var">trfExpr</span></a><span class="hs-special">)</span><span>
</span><a name="line-28"></a><span class="hs-keyword">import</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.GHCUtils.html"><span class="hs-identifier">Language.Haskell.Tools.BackendGHC.GHCUtils</span></a><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.GHCUtils.html#occName"><span class="hs-identifier hs-var">occName</span></a><span class="hs-special">,</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.GHCUtils.html#fromSrcText"><span class="hs-identifier hs-var">fromSrcText</span></a><span class="hs-special">)</span><span>
</span><a name="line-29"></a><span class="hs-keyword">import</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Monad.html"><span class="hs-identifier">Language.Haskell.Tools.BackendGHC.Monad</span></a><span>
</span><a name="line-30"></a><span class="hs-keyword">import</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Names.html"><span class="hs-identifier">Language.Haskell.Tools.BackendGHC.Names</span></a><span>
</span><a name="line-31"></a><span class="hs-keyword">import</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Patterns.html"><span class="hs-identifier">Language.Haskell.Tools.BackendGHC.Patterns</span></a><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Patterns.html#trfPattern"><span class="hs-identifier hs-var">trfPattern</span></a><span class="hs-special">)</span><span>
</span><a name="line-32"></a><span class="hs-keyword">import</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Types.html"><span class="hs-identifier">Language.Haskell.Tools.BackendGHC.Types</span></a><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Types.html#trfType"><span class="hs-identifier hs-var">trfType</span></a><span class="hs-special">)</span><span>
</span><a name="line-33"></a><span class="hs-keyword">import</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html"><span class="hs-identifier">Language.Haskell.Tools.BackendGHC.Utils</span></a><span>
</span><a name="line-34"></a><span>
</span><a name="line-35"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Language.Haskell.Tools.AST</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Ann</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">AnnMaybeG</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">AnnListG</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Dom</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">RangeStage</span><span class="hs-special">)</span><span>
</span><a name="line-36"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-identifier">Language.Haskell.Tools.AST</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">AST</span><span>
</span><a name="line-37"></a><span>
</span><a name="line-38"></a><span class="hs-identifier">trfBind</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Names.html#TransformName"><span class="hs-identifier hs-type">TransformName</span></a><span> </span><a href="#local-6989586621679246353"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679246354"><span class="hs-identifier hs-type">r</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Located</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">HsBind</span><span> </span><a href="#local-6989586621679246353"><span class="hs-identifier hs-type">n</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#Trf"><span class="hs-identifier hs-type">Trf</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Ann</span><span> </span><span class="hs-identifier hs-type">AST.UValueBind</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Dom</span><span> </span><a href="#local-6989586621679246354"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span> </span><span class="hs-identifier hs-type">RangeStage</span><span class="hs-special">)</span><span>
</span><a name="line-39"></a><a name="trfBind"><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfBind"><span class="hs-identifier">trfBind</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#trfLocNoSema"><span class="hs-identifier hs-var">trfLocNoSema</span></a><span> </span><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfBind%27"><span class="hs-identifier hs-var">trfBind'</span></a><span>
</span><a name="line-40"></a><span>
</span><a name="line-41"></a><span class="hs-identifier">trfBind'</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><a name="local-6989586621679246351"><a href="#local-6989586621679246351"><span class="hs-identifier">n</span></a></a><span> </span><a name="local-6989586621679246352"><a href="#local-6989586621679246352"><span class="hs-identifier">r</span></a></a><span> </span><span class="hs-operator">.</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Names.html#TransformName"><span class="hs-identifier hs-type">TransformName</span></a><span> </span><a href="#local-6989586621679246351"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679246352"><span class="hs-identifier hs-type">r</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">HsBind</span><span> </span><a href="#local-6989586621679246351"><span class="hs-identifier hs-type">n</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#Trf"><span class="hs-identifier hs-type">Trf</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">AST.UValueBind</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Dom</span><span> </span><a href="#local-6989586621679246352"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span> </span><span class="hs-identifier hs-type">RangeStage</span><span class="hs-special">)</span><span>
</span><a name="line-42"></a><span class="hs-comment">-- A value binding with a strcitness annotation</span><span>
</span><a name="line-43"></a><a name="trfBind%27"><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfBind%27"><span class="hs-identifier">trfBind'</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">FunBind</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">fun_id</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621679246355"><a href="#local-6989586621679246355"><span class="hs-identifier">id</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">fun_matches</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">MG</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">mg_alts</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">L</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-var">L</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Match</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">m_ctxt</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">FunRhs</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">mc_strictness</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">SrcStrict</span><span> </span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">m_pats</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">m_grhss</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">GRHSs</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-var">L</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">GRHS</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><a name="local-6989586621679246356"><a href="#local-6989586621679246356"><span class="hs-identifier">expr</span></a></a><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">L</span><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679246357"><a href="#local-6989586621679246357"><span class="hs-identifier">locals</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><a name="line-44"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><a name="local-6989586621679246358"><a href="#local-6989586621679246358"><span class="hs-identifier">bangLoc</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#focusBeforeLoc"><span class="hs-identifier hs-var">focusBeforeLoc</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">srcSpanStart</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">getLoc</span><span> </span><a href="#local-6989586621679246355"><span class="hs-identifier hs-var">id</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#tokenLoc"><span class="hs-identifier hs-var">tokenLoc</span></a><span> </span><span class="hs-identifier hs-var">AnnBang</span><span>
</span><a name="line-45"></a><span>       </span><span class="hs-identifier hs-var">AST.USimpleBind</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#annLocNoSema"><span class="hs-identifier hs-var">annLocNoSema</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">pure</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">combineSrcSpans</span><span> </span><a href="#local-6989586621679246358"><span class="hs-identifier hs-var">bangLoc</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">getLoc</span><span> </span><a href="#local-6989586621679246355"><span class="hs-identifier hs-var">id</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-46"></a><span>                             </span><span class="hs-special">(</span><span class="hs-identifier hs-var">AST.UBangPat</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#copyAnnot"><span class="hs-identifier hs-var">copyAnnot</span></a><span> </span><span class="hs-identifier hs-var">AST.UVarPat</span><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#define"><span class="hs-identifier hs-var">define</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Names.html#trfName"><span class="hs-identifier hs-var">trfName</span></a><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679246351"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679246355"><span class="hs-identifier hs-var">id</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-47"></a><span>                       </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#addEmptyScope"><span class="hs-identifier hs-var">addEmptyScope</span></a><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#addToScope"><span class="hs-identifier hs-var">addToScope</span></a><span> </span><a href="#local-6989586621679246357"><span class="hs-identifier hs-var">locals</span></a><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#annLocNoSema"><span class="hs-identifier hs-var">annLocNoSema</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">combineSrcSpans</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">getLoc</span><span> </span><a href="#local-6989586621679246356"><span class="hs-identifier hs-var">expr</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#tokenLoc"><span class="hs-identifier hs-var">tokenLoc</span></a><span> </span><span class="hs-identifier hs-var">AnnEqual</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">AST.UUnguardedRhs</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Exprs.html#trfExpr"><span class="hs-identifier hs-var">trfExpr</span></a><span> </span><a href="#local-6989586621679246356"><span class="hs-identifier hs-var">expr</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-48"></a><span>                       </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#addEmptyScope"><span class="hs-identifier hs-var">addEmptyScope</span></a><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfWhereLocalBinds"><span class="hs-identifier hs-var">trfWhereLocalBinds</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">getLoc</span><span> </span><a href="#local-6989586621679246356"><span class="hs-identifier hs-var">expr</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679246357"><span class="hs-identifier hs-var">locals</span></a><span class="hs-special">)</span><span>
</span><a name="line-49"></a><span class="hs-comment">-- A value binding (not a function)</span><span>
</span><a name="line-50"></a><span class="hs-identifier">trfBind'</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">FunBind</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">fun_id</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-6989586621679246359"><a href="#local-6989586621679246359"><span class="hs-identifier">id</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">fun_matches</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">MG</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">mg_alts</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">L</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-var">L</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Match</span><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">m_pats</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">m_grhss</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">GRHSs</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-var">L</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">GRHS</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><a name="local-6989586621679246360"><a href="#local-6989586621679246360"><span class="hs-identifier">expr</span></a></a><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">L</span><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679246361"><a href="#local-6989586621679246361"><span class="hs-identifier">locals</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">}</span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><a name="line-51"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">AST.USimpleBind</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#copyAnnot"><span class="hs-identifier hs-var">copyAnnot</span></a><span> </span><span class="hs-identifier hs-var">AST.UVarPat</span><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#define"><span class="hs-identifier hs-var">define</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Names.html#trfName"><span class="hs-identifier hs-var">trfName</span></a><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679246351"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679246359"><span class="hs-identifier hs-var">id</span></a><span class="hs-special">)</span><span>
</span><a name="line-52"></a><span>                    </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#addEmptyScope"><span class="hs-identifier hs-var">addEmptyScope</span></a><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#addToScope"><span class="hs-identifier hs-var">addToScope</span></a><span> </span><a href="#local-6989586621679246361"><span class="hs-identifier hs-var">locals</span></a><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#annLocNoSema"><span class="hs-identifier hs-var">annLocNoSema</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">combineSrcSpans</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">getLoc</span><span> </span><a href="#local-6989586621679246360"><span class="hs-identifier hs-var">expr</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#tokenLoc"><span class="hs-identifier hs-var">tokenLoc</span></a><span> </span><span class="hs-identifier hs-var">AnnEqual</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">AST.UUnguardedRhs</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Exprs.html#trfExpr"><span class="hs-identifier hs-var">trfExpr</span></a><span> </span><a href="#local-6989586621679246360"><span class="hs-identifier hs-var">expr</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-53"></a><span>                    </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#addEmptyScope"><span class="hs-identifier hs-var">addEmptyScope</span></a><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfWhereLocalBinds"><span class="hs-identifier hs-var">trfWhereLocalBinds</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">getLoc</span><span> </span><a href="#local-6989586621679246360"><span class="hs-identifier hs-var">expr</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679246361"><span class="hs-identifier hs-var">locals</span></a><span class="hs-special">)</span><span>
</span><a name="line-54"></a><span class="hs-identifier">trfBind'</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">FunBind</span><span> </span><a name="local-6989586621679246362"><a href="#local-6989586621679246362"><span class="hs-identifier">id</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">MG</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">unLoc</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a name="local-6989586621679246363"><a href="#local-6989586621679246363"><span class="hs-identifier">matches</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span>
</span><a name="line-55"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">AST.UFunBind</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#makeNonemptyIndentedList"><span class="hs-identifier hs-var">makeNonemptyIndentedList</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">mapM</span><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfMatch"><span class="hs-identifier hs-var">trfMatch</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">unLoc</span><span> </span><a href="#local-6989586621679246362"><span class="hs-identifier hs-var">id</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><a href="#local-6989586621679246363"><span class="hs-identifier hs-var">matches</span></a><span class="hs-special">)</span><span>
</span><a name="line-56"></a><span class="hs-identifier">trfBind'</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">PatBind</span><span> </span><a name="local-6989586621679246364"><a href="#local-6989586621679246364"><span class="hs-identifier">pat</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">GRHSs</span><span> </span><a name="local-6989586621679246365"><a href="#local-6989586621679246365"><span class="hs-identifier">rhs</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">unLoc</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a name="local-6989586621679246366"><a href="#local-6989586621679246366"><span class="hs-identifier">locals</span></a></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span>
</span><a name="line-57"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">AST.USimpleBind</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Patterns.html#trfPattern"><span class="hs-identifier hs-var">trfPattern</span></a><span> </span><a href="#local-6989586621679246364"><span class="hs-identifier hs-var">pat</span></a><span>
</span><a name="line-58"></a><span>                    </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#addEmptyScope"><span class="hs-identifier hs-var">addEmptyScope</span></a><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#addToScope"><span class="hs-identifier hs-var">addToScope</span></a><span> </span><a href="#local-6989586621679246366"><span class="hs-identifier hs-var">locals</span></a><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfRhss"><span class="hs-identifier hs-var">trfRhss</span></a><span> </span><a href="#local-6989586621679246365"><span class="hs-identifier hs-var">rhs</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-59"></a><span>                    </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#addEmptyScope"><span class="hs-identifier hs-var">addEmptyScope</span></a><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfWhereLocalBinds"><span class="hs-identifier hs-var">trfWhereLocalBinds</span></a><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#collectLocs"><span class="hs-identifier hs-var">collectLocs</span></a><span> </span><a href="#local-6989586621679246365"><span class="hs-identifier hs-var">rhs</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679246366"><span class="hs-identifier hs-var">locals</span></a><span class="hs-special">)</span><span>
</span><a name="line-60"></a><span class="hs-identifier">trfBind'</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">PatSynBind</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#convertionProblem"><span class="hs-identifier hs-var">convertionProblem</span></a><span> </span><span class="hs-string">&quot;Pattern synonym bindings should be recognized on the declaration level&quot;</span><span>
</span><a name="line-61"></a><span class="hs-identifier">trfBind'</span><span> </span><a name="local-6989586621679246367"><a href="#local-6989586621679246367"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#unhandledElement"><span class="hs-identifier hs-var">unhandledElement</span></a><span> </span><span class="hs-string">&quot;binding&quot;</span><span> </span><a href="#local-6989586621679246367"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-62"></a><span>
</span><a name="line-63"></a><span class="hs-identifier">trfMatch</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Names.html#TransformName"><span class="hs-identifier hs-type">TransformName</span></a><span> </span><a href="#local-6989586621679246349"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679246350"><span class="hs-identifier hs-type">r</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">IdP</span><span> </span><a href="#local-6989586621679246349"><span class="hs-identifier hs-type">n</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Located</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Match</span><span> </span><a href="#local-6989586621679246349"><span class="hs-identifier hs-type">n</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">LHsExpr</span><span> </span><a href="#local-6989586621679246349"><span class="hs-identifier hs-type">n</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#Trf"><span class="hs-identifier hs-type">Trf</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Ann</span><span> </span><span class="hs-identifier hs-type">AST.UMatch</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Dom</span><span> </span><a href="#local-6989586621679246350"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span> </span><span class="hs-identifier hs-type">RangeStage</span><span class="hs-special">)</span><span>
</span><a name="line-64"></a><a name="trfMatch"><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfMatch"><span class="hs-identifier">trfMatch</span></a></a><span> </span><a name="local-6989586621679246368"><a href="#local-6989586621679246368"><span class="hs-identifier">id</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#trfLocNoSema"><span class="hs-identifier hs-var">trfLocNoSema</span></a><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfMatch%27"><span class="hs-identifier hs-var">trfMatch'</span></a><span> </span><a href="#local-6989586621679246368"><span class="hs-identifier hs-var">id</span></a><span class="hs-special">)</span><span>
</span><a name="line-65"></a><span>
</span><a name="line-66"></a><span class="hs-identifier">trfMatch'</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Names.html#TransformName"><span class="hs-identifier hs-type">TransformName</span></a><span> </span><a href="#local-6989586621679246347"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679246348"><span class="hs-identifier hs-type">r</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">IdP</span><span> </span><a href="#local-6989586621679246347"><span class="hs-identifier hs-type">n</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Match</span><span> </span><a href="#local-6989586621679246347"><span class="hs-identifier hs-type">n</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">LHsExpr</span><span> </span><a href="#local-6989586621679246347"><span class="hs-identifier hs-type">n</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#Trf"><span class="hs-identifier hs-type">Trf</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">AST.UMatch</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Dom</span><span> </span><a href="#local-6989586621679246348"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span> </span><span class="hs-identifier hs-type">RangeStage</span><span class="hs-special">)</span><span>
</span><a name="line-67"></a><a name="trfMatch%27"><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfMatch%27"><span class="hs-identifier">trfMatch'</span></a></a><span> </span><a name="local-6989586621679246369"><a href="#local-6989586621679246369"><span class="hs-identifier">name</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Match</span><span> </span><a name="local-6989586621679246370"><a href="#local-6989586621679246370"><span class="hs-identifier">funid</span></a></a><span> </span><a name="local-6989586621679246371"><a href="#local-6989586621679246371"><span class="hs-identifier">pats</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">GRHSs</span><span> </span><a name="local-6989586621679246372"><a href="#local-6989586621679246372"><span class="hs-identifier">rhss</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">unLoc</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a name="local-6989586621679246373"><a href="#local-6989586621679246373"><span class="hs-identifier">locBinds</span></a></a><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-68"></a><span>  </span><span class="hs-comment">-- TODO: add the optional typ to pats</span><span>
</span><a name="line-69"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">AST.UMatch</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfMatchLhs"><span class="hs-identifier hs-var">trfMatchLhs</span></a><span> </span><a href="#local-6989586621679246369"><span class="hs-identifier hs-var">name</span></a><span> </span><a href="#local-6989586621679246370"><span class="hs-identifier hs-var">funid</span></a><span> </span><a href="#local-6989586621679246371"><span class="hs-identifier hs-var">pats</span></a><span>
</span><a name="line-70"></a><span>               </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#addToScope"><span class="hs-identifier hs-var">addToScope</span></a><span> </span><a href="#local-6989586621679246371"><span class="hs-identifier hs-var">pats</span></a><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#addToScope"><span class="hs-identifier hs-var">addToScope</span></a><span> </span><a href="#local-6989586621679246373"><span class="hs-identifier hs-var">locBinds</span></a><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfRhss"><span class="hs-identifier hs-var">trfRhss</span></a><span> </span><a href="#local-6989586621679246372"><span class="hs-identifier hs-var">rhss</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-71"></a><span>               </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#addToScope"><span class="hs-identifier hs-var">addToScope</span></a><span> </span><a href="#local-6989586621679246371"><span class="hs-identifier hs-var">pats</span></a><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfWhereLocalBinds"><span class="hs-identifier hs-var">trfWhereLocalBinds</span></a><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#collectLocs"><span class="hs-identifier hs-var">collectLocs</span></a><span> </span><a href="#local-6989586621679246372"><span class="hs-identifier hs-var">rhss</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679246373"><span class="hs-identifier hs-var">locBinds</span></a><span class="hs-special">)</span><span>
</span><a name="line-72"></a><span>
</span><a name="line-73"></a><span class="hs-identifier">trfMatchLhs</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><a name="local-6989586621679246345"><a href="#local-6989586621679246345"><span class="hs-identifier">n</span></a></a><span> </span><a name="local-6989586621679246346"><a href="#local-6989586621679246346"><span class="hs-identifier">r</span></a></a><span> </span><span class="hs-operator">.</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Names.html#TransformName"><span class="hs-identifier hs-type">TransformName</span></a><span> </span><a href="#local-6989586621679246345"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679246346"><span class="hs-identifier hs-type">r</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">IdP</span><span> </span><a href="#local-6989586621679246345"><span class="hs-identifier hs-type">n</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">HsMatchContext</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">NameOrRdrName</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">IdP</span><span> </span><a href="#local-6989586621679246345"><span class="hs-identifier hs-type">n</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">LPat</span><span> </span><a href="#local-6989586621679246345"><span class="hs-identifier hs-type">n</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#Trf"><span class="hs-identifier hs-type">Trf</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Ann</span><span> </span><span class="hs-identifier hs-type">AST.UMatchLhs</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Dom</span><span> </span><a href="#local-6989586621679246346"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span> </span><span class="hs-identifier hs-type">RangeStage</span><span class="hs-special">)</span><span>
</span><a name="line-74"></a><a name="trfMatchLhs"><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfMatchLhs"><span class="hs-identifier">trfMatchLhs</span></a></a><span> </span><a name="local-6989586621679246374"><a href="#local-6989586621679246374"><span class="hs-identifier">name</span></a></a><span> </span><a name="local-6989586621679246375"><a href="#local-6989586621679246375"><span class="hs-identifier">fb</span></a></a><span> </span><a name="local-6989586621679246376"><a href="#local-6989586621679246376"><span class="hs-identifier">pats</span></a></a><span>
</span><a name="line-75"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><a name="local-6989586621679246377"><a href="#local-6989586621679246377"><span class="hs-identifier">implicitIdLoc</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">mkSrcSpan</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#atTheStart"><span class="hs-identifier hs-var">atTheStart</span></a><span> </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#atTheStart"><span class="hs-identifier hs-var">atTheStart</span></a><span>
</span><a name="line-76"></a><span>       </span><a name="local-6989586621679246378"><a href="#local-6989586621679246378"><span class="hs-identifier">parenOpLoc</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#tokensLoc"><span class="hs-identifier hs-var">tokensLoc</span></a><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-var">AnnOpenP</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">AnnVal</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">AnnCloseP</span><span class="hs-special">]</span><span>
</span><a name="line-77"></a><span>       </span><a name="local-6989586621679246379"><a href="#local-6989586621679246379"><span class="hs-identifier">nonFunOpLoc</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#tokenLoc"><span class="hs-identifier hs-var">tokenLoc</span></a><span> </span><span class="hs-identifier hs-var">AnnVal</span><span>
</span><a name="line-78"></a><span>       </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621679246380"><a href="#local-6989586621679246380"><span class="hs-identifier">infixLoc</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679246378"><span class="hs-identifier hs-var">parenOpLoc</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679246379"><span class="hs-identifier hs-var">nonFunOpLoc</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-79"></a><span>                        </span><span class="hs-special">(</span><span class="hs-identifier hs-var">RealSrcSpan</span><span> </span><a name="local-6989586621679246381"><a href="#local-6989586621679246381"><span class="hs-identifier">rsp1</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">RealSrcSpan</span><span> </span><a name="local-6989586621679246382"><a href="#local-6989586621679246382"><span class="hs-identifier">rsp2</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-80"></a><span>                          </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">srcLocCol</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">realSrcSpanStart</span><span> </span><a href="#local-6989586621679246382"><span class="hs-identifier hs-var">rsp2</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">==</span><span> </span><span class="hs-identifier hs-var">srcLocCol</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">realSrcSpanStart</span><span> </span><a href="#local-6989586621679246381"><span class="hs-identifier hs-var">rsp1</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">+</span><span> </span><span class="hs-number">1</span><span>
</span><a name="line-81"></a><span>                              </span><span class="hs-operator hs-var">&amp;&amp;</span><span> </span><span class="hs-identifier hs-var">srcLocCol</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">realSrcSpanEnd</span><span> </span><a href="#local-6989586621679246382"><span class="hs-identifier hs-var">rsp2</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">==</span><span> </span><span class="hs-identifier hs-var">srcLocCol</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">realSrcSpanEnd</span><span> </span><a href="#local-6989586621679246381"><span class="hs-identifier hs-var">rsp1</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-</span><span> </span><span class="hs-number">1</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679246378"><span class="hs-identifier hs-var">parenOpLoc</span></a><span>
</span><a name="line-82"></a><span>                        </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679246379"><span class="hs-identifier hs-var">nonFunOpLoc</span></a><span> </span><span class="hs-comment">-- sometimes parenOpLoc is not an actual operator in parentheses, it just grabs</span><span>
</span><a name="line-83"></a><span>                                         </span><span class="hs-comment">-- a paren, so we need to check that it is actually what we seek</span><span>
</span><a name="line-84"></a><span>       </span><a name="local-6989586621679246383"><a href="#local-6989586621679246383"><span class="hs-identifier">closeLoc</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">srcSpanStart</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">combineSrcSpans</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#tokenLoc"><span class="hs-identifier hs-var">tokenLoc</span></a><span> </span><span class="hs-identifier hs-var">AnnEqual</span><span> </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#tokenLoc"><span class="hs-identifier hs-var">tokenLoc</span></a><span> </span><span class="hs-identifier hs-var">AnnVbar</span><span class="hs-special">)</span><span>
</span><a name="line-85"></a><span>       </span><a name="local-6989586621679246384"><a href="#local-6989586621679246384"><span class="hs-identifier">args</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">mapM</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Patterns.html#trfPattern"><span class="hs-identifier hs-var">trfPattern</span></a><span> </span><a href="#local-6989586621679246376"><span class="hs-identifier hs-var">pats</span></a><span>
</span><a name="line-86"></a><span>       </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679246385"><a href="#local-6989586621679246385"><span class="hs-identifier">n</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679246386"><a href="#local-6989586621679246386"><span class="hs-identifier">isInfix</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679246375"><span class="hs-identifier hs-var">fb</span></a><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-identifier hs-var">FunRhs</span><span> </span><a name="local-6989586621679246387"><a href="#local-6989586621679246387"><span class="hs-identifier">n</span></a></a><span> </span><a name="local-6989586621679246388"><a href="#local-6989586621679246388"><span class="hs-identifier">inf</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679246387"><span class="hs-identifier hs-var">n</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679246388"><span class="hs-identifier hs-var">inf</span></a><span> </span><span class="hs-operator hs-var">==</span><span> </span><span class="hs-identifier hs-var">Infix</span><span class="hs-special">)</span><span>
</span><a name="line-87"></a><span>                                     </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621679246389"><a href="#local-6989586621679246389"><span class="hs-identifier">token</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="hs-identifier hs-var">isSymOcc</span><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.GHCUtils.html#occName"><span class="hs-identifier hs-var">occName</span></a><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679246345"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679246374"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&amp;&amp;</span><span> </span><span class="hs-identifier hs-var">isGoodSrcSpan</span><span> </span><a href="#local-6989586621679246380"><span class="hs-identifier hs-var">infixLoc</span></a><span> </span><span class="hs-keyword">then</span><span> </span><a href="#local-6989586621679246380"><span class="hs-identifier hs-var">infixLoc</span></a><span> </span><span class="hs-keyword">else</span><span> </span><a href="#local-6989586621679246377"><span class="hs-identifier hs-var">implicitIdLoc</span></a><span>
</span><a name="line-88"></a><span>                                           </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">L</span><span> </span><a href="#local-6989586621679246389"><span class="hs-identifier hs-var">token</span></a><span> </span><a href="#local-6989586621679246374"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">length</span><span> </span><a href="#local-6989586621679246376"><span class="hs-identifier hs-var">pats</span></a><span> </span><span class="hs-operator hs-var">&gt;</span><span> </span><span class="hs-number">0</span><span> </span><span class="hs-operator hs-var">&amp;&amp;</span><span> </span><span class="hs-identifier hs-var">srcSpanStart</span><span> </span><a href="#local-6989586621679246389"><span class="hs-identifier hs-var">token</span></a><span> </span><span class="hs-operator hs-var">&gt;=</span><span> </span><span class="hs-identifier hs-var">srcSpanEnd</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">getLoc</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679246376"><span class="hs-identifier hs-var">pats</span></a><span> </span><span class="hs-operator hs-var">!!</span><span> </span><span class="hs-number">0</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-89"></a><span>       </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#annLocNoSema"><span class="hs-identifier hs-var">annLocNoSema</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">mkSrcSpan</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#atTheStart"><span class="hs-identifier hs-var">atTheStart</span></a><span> </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">pure</span><span> </span><a href="#local-6989586621679246383"><span class="hs-identifier hs-var">closeLoc</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">$</span><span>
</span><a name="line-90"></a><span>        </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679246384"><span class="hs-identifier hs-var">args</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679246386"><span class="hs-identifier hs-var">isInfix</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-91"></a><span>           </span><span class="hs-special">(</span><a name="local-6989586621679246390"><a href="#local-6989586621679246390"><span class="hs-identifier">left</span></a></a><span class="hs-glyph">:</span><a name="local-6989586621679246391"><a href="#local-6989586621679246391"><span class="hs-identifier">right</span></a></a><span class="hs-glyph">:</span><a name="local-6989586621679246392"><a href="#local-6989586621679246392"><span class="hs-identifier">rest</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">True</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">AST.UInfixLhs</span><span> </span><a href="#local-6989586621679246390"><span class="hs-identifier hs-var">left</span></a><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#define"><span class="hs-identifier hs-var">define</span></a><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Names.html#trfOperator"><span class="hs-identifier hs-var">trfOperator</span></a><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679246345"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679246385"><span class="hs-identifier hs-var">n</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><span class="hs-identifier hs-var">pure</span><span> </span><a href="#local-6989586621679246391"><span class="hs-identifier hs-var">right</span></a><span> </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#makeList"><span class="hs-identifier hs-var">makeList</span></a><span> </span><span class="hs-string">&quot; &quot;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">pure</span><span> </span><a href="#local-6989586621679246383"><span class="hs-identifier hs-var">closeLoc</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">pure</span><span> </span><a href="#local-6989586621679246392"><span class="hs-identifier hs-var">rest</span></a><span class="hs-special">)</span><span>
</span><a name="line-92"></a><span>           </span><span class="hs-identifier">_</span><span>                       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">AST.UNormalLhs</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#define"><span class="hs-identifier hs-var">define</span></a><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Names.html#trfName"><span class="hs-identifier hs-var">trfName</span></a><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679246345"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679246385"><span class="hs-identifier hs-var">n</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#makeList"><span class="hs-identifier hs-var">makeList</span></a><span> </span><span class="hs-string">&quot; &quot;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">pure</span><span> </span><a href="#local-6989586621679246383"><span class="hs-identifier hs-var">closeLoc</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">pure</span><span> </span><a href="#local-6989586621679246384"><span class="hs-identifier hs-var">args</span></a><span class="hs-special">)</span><span>
</span><a name="line-93"></a><span>
</span><a name="line-94"></a><span class="hs-identifier">trfRhss</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Names.html#TransformName"><span class="hs-identifier hs-type">TransformName</span></a><span> </span><a href="#local-6989586621679246343"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679246344"><span class="hs-identifier hs-type">r</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">Located</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">GRHS</span><span> </span><a href="#local-6989586621679246343"><span class="hs-identifier hs-type">n</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">LHsExpr</span><span> </span><a href="#local-6989586621679246343"><span class="hs-identifier hs-type">n</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#Trf"><span class="hs-identifier hs-type">Trf</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Ann</span><span> </span><span class="hs-identifier hs-type">AST.URhs</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Dom</span><span> </span><a href="#local-6989586621679246344"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span> </span><span class="hs-identifier hs-type">RangeStage</span><span class="hs-special">)</span><span>
</span><a name="line-95"></a><span class="hs-comment">-- the original location on the GRHS misleadingly contains the local bindings</span><span>
</span><a name="line-96"></a><a name="trfRhss"><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfRhss"><span class="hs-identifier">trfRhss</span></a></a><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-var">unLoc</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">GRHS</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><a name="local-6989586621679246393"><a href="#local-6989586621679246393"><span class="hs-identifier">body</span></a></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#annLocNoSema"><span class="hs-identifier hs-var">annLocNoSema</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">combineSrcSpans</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">getLoc</span><span> </span><a href="#local-6989586621679246393"><span class="hs-identifier hs-var">body</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#tokenBefore"><span class="hs-identifier hs-var">tokenBefore</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">srcSpanStart</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">getLoc</span><span> </span><a href="#local-6989586621679246393"><span class="hs-identifier hs-var">body</span></a><span class="hs-special">)</span><span> </span><span class="hs-identifier hs-var">AnnEqual</span><span class="hs-special">)</span><span>
</span><a name="line-97"></a><span>                                         </span><span class="hs-special">(</span><span class="hs-identifier hs-var">AST.UUnguardedRhs</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Exprs.html#trfExpr"><span class="hs-identifier hs-var">trfExpr</span></a><span> </span><a href="#local-6989586621679246393"><span class="hs-identifier hs-var">body</span></a><span class="hs-special">)</span><span>
</span><a name="line-98"></a><span class="hs-identifier">trfRhss</span><span> </span><a name="local-6989586621679246394"><a href="#local-6989586621679246394"><span class="hs-identifier">rhss</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#annLocNoSema"><span class="hs-identifier hs-var">annLocNoSema</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">pure</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#collectLocs"><span class="hs-identifier hs-var">collectLocs</span></a><span> </span><a href="#local-6989586621679246394"><span class="hs-identifier hs-var">rhss</span></a><span class="hs-special">)</span><span>
</span><a name="line-99"></a><span>                      </span><span class="hs-special">(</span><span class="hs-identifier hs-var">AST.UGuardedRhss</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#nonemptyAnnList"><span class="hs-identifier hs-var">nonemptyAnnList</span></a><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><span class="hs-identifier hs-var">mapM</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfGuardedRhs"><span class="hs-identifier hs-var">trfGuardedRhs</span></a><span> </span><a href="#local-6989586621679246394"><span class="hs-identifier hs-var">rhss</span></a><span class="hs-special">)</span><span>
</span><a name="line-100"></a><span>
</span><a name="line-101"></a><span class="hs-identifier">trfGuardedRhs</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Names.html#TransformName"><span class="hs-identifier hs-type">TransformName</span></a><span> </span><a href="#local-6989586621679246341"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679246342"><span class="hs-identifier hs-type">r</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Located</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">GRHS</span><span> </span><a href="#local-6989586621679246341"><span class="hs-identifier hs-type">n</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">LHsExpr</span><span> </span><a href="#local-6989586621679246341"><span class="hs-identifier hs-type">n</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#Trf"><span class="hs-identifier hs-type">Trf</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Ann</span><span> </span><span class="hs-identifier hs-type">AST.UGuardedRhs</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Dom</span><span> </span><a href="#local-6989586621679246342"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span> </span><span class="hs-identifier hs-type">RangeStage</span><span class="hs-special">)</span><span>
</span><a name="line-102"></a><a name="trfGuardedRhs"><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfGuardedRhs"><span class="hs-identifier">trfGuardedRhs</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#trfLocNoSema"><span class="hs-identifier hs-var">trfLocNoSema</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-identifier hs-var">GRHS</span><span> </span><a name="local-6989586621679246395"><a href="#local-6989586621679246395"><span class="hs-identifier">guards</span></a></a><span> </span><a name="local-6989586621679246396"><a href="#local-6989586621679246396"><span class="hs-identifier">body</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-103"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">AST.UGuardedRhs</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#nonemptyAnnList"><span class="hs-identifier hs-var">nonemptyAnnList</span></a><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#trfScopedSequence"><span class="hs-identifier hs-var">trfScopedSequence</span></a><span> </span><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfRhsGuard"><span class="hs-identifier hs-var">trfRhsGuard</span></a><span> </span><a href="#local-6989586621679246395"><span class="hs-identifier hs-var">guards</span></a><span> </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#addToScope"><span class="hs-identifier hs-var">addToScope</span></a><span> </span><a href="#local-6989586621679246395"><span class="hs-identifier hs-var">guards</span></a><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Exprs.html#trfExpr"><span class="hs-identifier hs-var">trfExpr</span></a><span> </span><a href="#local-6989586621679246396"><span class="hs-identifier hs-var">body</span></a><span class="hs-special">)</span><span>
</span><a name="line-104"></a><span>
</span><a name="line-105"></a><span class="hs-identifier">trfRhsGuard</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Names.html#TransformName"><span class="hs-identifier hs-type">TransformName</span></a><span> </span><a href="#local-6989586621679246339"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679246340"><span class="hs-identifier hs-type">r</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Located</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Stmt</span><span> </span><a href="#local-6989586621679246339"><span class="hs-identifier hs-type">n</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">LHsExpr</span><span> </span><a href="#local-6989586621679246339"><span class="hs-identifier hs-type">n</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#Trf"><span class="hs-identifier hs-type">Trf</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Ann</span><span> </span><span class="hs-identifier hs-type">AST.URhsGuard</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Dom</span><span> </span><a href="#local-6989586621679246340"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span> </span><span class="hs-identifier hs-type">RangeStage</span><span class="hs-special">)</span><span>
</span><a name="line-106"></a><a name="trfRhsGuard"><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfRhsGuard"><span class="hs-identifier">trfRhsGuard</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#trfLocNoSema"><span class="hs-identifier hs-var">trfLocNoSema</span></a><span> </span><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfRhsGuard%27"><span class="hs-identifier hs-var">trfRhsGuard'</span></a><span>
</span><a name="line-107"></a><span>
</span><a name="line-108"></a><span class="hs-identifier">trfRhsGuard'</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Names.html#TransformName"><span class="hs-identifier hs-type">TransformName</span></a><span> </span><a href="#local-6989586621679246337"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679246338"><span class="hs-identifier hs-type">r</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Stmt</span><span> </span><a href="#local-6989586621679246337"><span class="hs-identifier hs-type">n</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">LHsExpr</span><span> </span><a href="#local-6989586621679246337"><span class="hs-identifier hs-type">n</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#Trf"><span class="hs-identifier hs-type">Trf</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">AST.URhsGuard</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Dom</span><span> </span><a href="#local-6989586621679246338"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span> </span><span class="hs-identifier hs-type">RangeStage</span><span class="hs-special">)</span><span>
</span><a name="line-109"></a><a name="trfRhsGuard%27"><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfRhsGuard%27"><span class="hs-identifier">trfRhsGuard'</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">BindStmt</span><span> </span><a name="local-6989586621679246397"><a href="#local-6989586621679246397"><span class="hs-identifier">pat</span></a></a><span> </span><a name="local-6989586621679246398"><a href="#local-6989586621679246398"><span class="hs-identifier">body</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">AST.UGuardBind</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Patterns.html#trfPattern"><span class="hs-identifier hs-var">trfPattern</span></a><span> </span><a href="#local-6989586621679246397"><span class="hs-identifier hs-var">pat</span></a><span> </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Exprs.html#trfExpr"><span class="hs-identifier hs-var">trfExpr</span></a><span> </span><a href="#local-6989586621679246398"><span class="hs-identifier hs-var">body</span></a><span>
</span><a name="line-110"></a><span class="hs-identifier">trfRhsGuard'</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">BodyStmt</span><span> </span><a name="local-6989586621679246399"><a href="#local-6989586621679246399"><span class="hs-identifier">body</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">AST.UGuardCheck</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Exprs.html#trfExpr"><span class="hs-identifier hs-var">trfExpr</span></a><span> </span><a href="#local-6989586621679246399"><span class="hs-identifier hs-var">body</span></a><span>
</span><a name="line-111"></a><span class="hs-identifier">trfRhsGuard'</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">LetStmt</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">unLoc</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a name="local-6989586621679246400"><a href="#local-6989586621679246400"><span class="hs-identifier">binds</span></a></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">AST.UGuardLet</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfLocalBinds"><span class="hs-identifier hs-var">trfLocalBinds</span></a><span> </span><span class="hs-identifier hs-var">AnnLet</span><span> </span><a href="#local-6989586621679246400"><span class="hs-identifier hs-var">binds</span></a><span>
</span><a name="line-112"></a><span class="hs-identifier">trfRhsGuard'</span><span> </span><a name="local-6989586621679246401"><a href="#local-6989586621679246401"><span class="hs-identifier">d</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#unhandledElement"><span class="hs-identifier hs-var">unhandledElement</span></a><span> </span><span class="hs-string">&quot;guard&quot;</span><span> </span><a href="#local-6989586621679246401"><span class="hs-identifier hs-var">d</span></a><span>
</span><a name="line-113"></a><span>
</span><a name="line-114"></a><span class="hs-identifier">trfWhereLocalBinds</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Names.html#TransformName"><span class="hs-identifier hs-type">TransformName</span></a><span> </span><a href="#local-6989586621679246335"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679246336"><span class="hs-identifier hs-type">r</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">SrcSpan</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">HsLocalBinds</span><span> </span><a href="#local-6989586621679246335"><span class="hs-identifier hs-type">n</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#Trf"><span class="hs-identifier hs-type">Trf</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">AnnMaybeG</span><span> </span><span class="hs-identifier hs-type">AST.ULocalBinds</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Dom</span><span> </span><a href="#local-6989586621679246336"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span> </span><span class="hs-identifier hs-type">RangeStage</span><span class="hs-special">)</span><span>
</span><a name="line-115"></a><a name="trfWhereLocalBinds"><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfWhereLocalBinds"><span class="hs-identifier">trfWhereLocalBinds</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier hs-var">EmptyLocalBinds</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#nothing"><span class="hs-identifier hs-var">nothing</span></a><span> </span><span class="hs-string">&quot;&quot;</span><span> </span><span class="hs-string">&quot;&quot;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#atTheEnd"><span class="hs-identifier hs-var">atTheEnd</span></a><span>
</span><a name="line-116"></a><span class="hs-identifier">trfWhereLocalBinds</span><span> </span><a name="local-6989586621679246402"><a href="#local-6989586621679246402"><span class="hs-identifier">bef</span></a></a><span> </span><a name="local-6989586621679246403"><a href="#local-6989586621679246403"><span class="hs-identifier">binds</span></a></a><span>
</span><a name="line-117"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#makeJust"><span class="hs-identifier hs-var">makeJust</span></a><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#annLocNoSema"><span class="hs-identifier hs-var">annLocNoSema</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">combineSrcSpans</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">srcLocSpan</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">srcSpanEnd</span><span> </span><a href="#local-6989586621679246402"><span class="hs-identifier hs-var">bef</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">`</span><span class="hs-identifier hs-var">combineSrcSpans</span><span class="hs-special">`</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Binds.html#getBindLocs"><span class="hs-identifier hs-var">getBindLocs</span></a><span> </span><a href="#local-6989586621679246403"><span class="hs-identifier hs-var">binds</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#tokenLocBack"><span class="hs-identifier hs-var">tokenLocBack</span></a><span> </span><span class="hs-identifier hs-var">AnnWhere</span><span class="hs-special">)</span><span>
</span><a name="line-118"></a><span>                              </span><span class="hs-special">(</span><span class="hs-identifier hs-var">AST.ULocalBinds</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#addToScope"><span class="hs-identifier hs-var">addToScope</span></a><span> </span><a href="#local-6989586621679246403"><span class="hs-identifier hs-var">binds</span></a><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfLocalBinds"><span class="hs-identifier hs-var">trfLocalBinds</span></a><span> </span><span class="hs-identifier hs-var">AnnWhere</span><span> </span><a href="#local-6989586621679246403"><span class="hs-identifier hs-var">binds</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-119"></a><span>
</span><a name="line-120"></a><span class="hs-identifier">getBindLocs</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">HsLocalBinds</span><span> </span><a href="#local-6989586621679246334"><span class="hs-identifier hs-type">n</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">SrcSpan</span><span>
</span><a name="line-121"></a><a name="getBindLocs"><a href="Language.Haskell.Tools.BackendGHC.Binds.html#getBindLocs"><span class="hs-identifier">getBindLocs</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">HsValBinds</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">ValBindsIn</span><span> </span><a name="local-6989586621679246404"><a href="#local-6989586621679246404"><span class="hs-identifier">binds</span></a></a><span> </span><a name="local-6989586621679246405"><a href="#local-6989586621679246405"><span class="hs-identifier">sigs</span></a></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#foldLocs"><span class="hs-identifier hs-var">foldLocs</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">map</span><span> </span><span class="hs-identifier hs-var">getLoc</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">bagToList</span><span> </span><a href="#local-6989586621679246404"><span class="hs-identifier hs-var">binds</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-identifier hs-var">map</span><span> </span><span class="hs-identifier hs-var">getLoc</span><span> </span><a href="#local-6989586621679246405"><span class="hs-identifier hs-var">sigs</span></a><span>
</span><a name="line-122"></a><span class="hs-identifier">getBindLocs</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">HsValBinds</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">ValBindsOut</span><span> </span><a name="local-6989586621679246406"><a href="#local-6989586621679246406"><span class="hs-identifier">binds</span></a></a><span> </span><a name="local-6989586621679246407"><a href="#local-6989586621679246407"><span class="hs-identifier">sigs</span></a></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#foldLocs"><span class="hs-identifier hs-var">foldLocs</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">map</span><span> </span><span class="hs-identifier hs-var">getLoc</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">concatMap</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">bagToList</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">snd</span><span class="hs-special">)</span><span> </span><a href="#local-6989586621679246406"><span class="hs-identifier hs-var">binds</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-identifier hs-var">map</span><span> </span><span class="hs-identifier hs-var">getLoc</span><span> </span><a href="#local-6989586621679246407"><span class="hs-identifier hs-var">sigs</span></a><span>
</span><a name="line-123"></a><span class="hs-identifier">getBindLocs</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">HsIPBinds</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">IPBinds</span><span> </span><a name="local-6989586621679246408"><a href="#local-6989586621679246408"><span class="hs-identifier">binds</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#foldLocs"><span class="hs-identifier hs-var">foldLocs</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">map</span><span> </span><span class="hs-identifier hs-var">getLoc</span><span> </span><a href="#local-6989586621679246408"><span class="hs-identifier hs-var">binds</span></a><span>
</span><a name="line-124"></a><span class="hs-identifier">getBindLocs</span><span> </span><span class="hs-identifier hs-var">EmptyLocalBinds</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">noSrcSpan</span><span>
</span><a name="line-125"></a><span>
</span><a name="line-126"></a><span class="hs-identifier">trfLocalBinds</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Names.html#TransformName"><span class="hs-identifier hs-type">TransformName</span></a><span> </span><a href="#local-6989586621679246332"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679246333"><span class="hs-identifier hs-type">r</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">AnnKeywordId</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">HsLocalBinds</span><span> </span><a href="#local-6989586621679246332"><span class="hs-identifier hs-type">n</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#Trf"><span class="hs-identifier hs-type">Trf</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">AnnListG</span><span> </span><span class="hs-identifier hs-type">AST.ULocalBind</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Dom</span><span> </span><a href="#local-6989586621679246333"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span> </span><span class="hs-identifier hs-type">RangeStage</span><span class="hs-special">)</span><span>
</span><a name="line-127"></a><a name="trfLocalBinds"><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfLocalBinds"><span class="hs-identifier">trfLocalBinds</span></a></a><span> </span><a name="local-6989586621679246409"><a href="#local-6989586621679246409"><span class="hs-identifier">token</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">HsValBinds</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">ValBindsIn</span><span> </span><a name="local-6989586621679246410"><a href="#local-6989586621679246410"><span class="hs-identifier">binds</span></a></a><span> </span><a name="local-6989586621679246411"><a href="#local-6989586621679246411"><span class="hs-identifier">sigs</span></a></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-128"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#makeIndentedListBefore"><span class="hs-identifier hs-var">makeIndentedListBefore</span></a><span> </span><span class="hs-string">&quot; &quot;</span><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#after"><span class="hs-identifier hs-var">after</span></a><span> </span><a href="#local-6989586621679246409"><span class="hs-identifier hs-var">token</span></a><span class="hs-special">)</span><span>
</span><a name="line-129"></a><span>      </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#orderDefs"><span class="hs-identifier hs-var">orderDefs</span></a><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-operator hs-var">++</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><span class="hs-identifier hs-var">mapM</span><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#copyAnnot"><span class="hs-identifier hs-var">copyAnnot</span></a><span> </span><span class="hs-identifier hs-var">AST.ULocalValBind</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfBind"><span class="hs-identifier hs-var">trfBind</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">bagToList</span><span> </span><a href="#local-6989586621679246410"><span class="hs-identifier hs-var">binds</span></a><span class="hs-special">)</span><span>
</span><a name="line-130"></a><span>                           </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><span class="hs-identifier hs-var">mapM</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfLocalSig"><span class="hs-identifier hs-var">trfLocalSig</span></a><span> </span><a href="#local-6989586621679246411"><span class="hs-identifier hs-var">sigs</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-131"></a><span class="hs-identifier">trfLocalBinds</span><span> </span><a name="local-6989586621679246412"><a href="#local-6989586621679246412"><span class="hs-identifier">token</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">HsValBinds</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">ValBindsOut</span><span> </span><a name="local-6989586621679246413"><a href="#local-6989586621679246413"><span class="hs-identifier">binds</span></a></a><span> </span><a name="local-6989586621679246414"><a href="#local-6989586621679246414"><span class="hs-identifier">sigs</span></a></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-132"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#makeIndentedListBefore"><span class="hs-identifier hs-var">makeIndentedListBefore</span></a><span> </span><span class="hs-string">&quot; &quot;</span><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#after"><span class="hs-identifier hs-var">after</span></a><span> </span><a href="#local-6989586621679246412"><span class="hs-identifier hs-var">token</span></a><span class="hs-special">)</span><span>
</span><a name="line-133"></a><span>      </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#orderDefs"><span class="hs-identifier hs-var">orderDefs</span></a><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-operator hs-var">++</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">concat</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><span class="hs-identifier hs-var">mapM</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">mapM</span><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#copyAnnot"><span class="hs-identifier hs-var">copyAnnot</span></a><span> </span><span class="hs-identifier hs-var">AST.ULocalValBind</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfBind"><span class="hs-identifier hs-var">trfBind</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">bagToList</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">snd</span><span class="hs-special">)</span><span> </span><a href="#local-6989586621679246413"><span class="hs-identifier hs-var">binds</span></a><span class="hs-special">)</span><span>
</span><a name="line-134"></a><span>                           </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><span class="hs-identifier hs-var">mapM</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfLocalSig"><span class="hs-identifier hs-var">trfLocalSig</span></a><span> </span><a href="#local-6989586621679246414"><span class="hs-identifier hs-var">sigs</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-135"></a><span class="hs-identifier">trfLocalBinds</span><span> </span><a name="local-6989586621679246415"><a href="#local-6989586621679246415"><span class="hs-identifier">token</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">HsIPBinds</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">IPBinds</span><span> </span><a name="local-6989586621679246416"><a href="#local-6989586621679246416"><span class="hs-identifier">binds</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-136"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#makeIndentedListBefore"><span class="hs-identifier hs-var">makeIndentedListBefore</span></a><span> </span><span class="hs-string">&quot; &quot;</span><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#after"><span class="hs-identifier hs-var">after</span></a><span> </span><a href="#local-6989586621679246415"><span class="hs-identifier hs-var">token</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">mapM</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfIpBind"><span class="hs-identifier hs-var">trfIpBind</span></a><span> </span><a href="#local-6989586621679246416"><span class="hs-identifier hs-var">binds</span></a><span class="hs-special">)</span><span>
</span><a name="line-137"></a><span class="hs-identifier">trfLocalBinds</span><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679246417"><a href="#local-6989586621679246417"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#unhandledElement"><span class="hs-identifier hs-var">unhandledElement</span></a><span> </span><span class="hs-string">&quot;local binds&quot;</span><span> </span><a href="#local-6989586621679246417"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-138"></a><span>
</span><a name="line-139"></a><span class="hs-identifier">trfIpBind</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Names.html#TransformName"><span class="hs-identifier hs-type">TransformName</span></a><span> </span><a href="#local-6989586621679246330"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679246331"><span class="hs-identifier hs-type">r</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Located</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">IPBind</span><span> </span><a href="#local-6989586621679246330"><span class="hs-identifier hs-type">n</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#Trf"><span class="hs-identifier hs-type">Trf</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Ann</span><span> </span><span class="hs-identifier hs-type">AST.ULocalBind</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Dom</span><span> </span><a href="#local-6989586621679246331"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span> </span><span class="hs-identifier hs-type">RangeStage</span><span class="hs-special">)</span><span>
</span><a name="line-140"></a><a name="trfIpBind"><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfIpBind"><span class="hs-identifier">trfIpBind</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#trfLocNoSema"><span class="hs-identifier hs-var">trfLocNoSema</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><a name="line-141"></a><span>  </span><span class="hs-identifier hs-var">IPBind</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Left</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">L</span><span> </span><a name="local-6989586621679246418"><a href="#local-6989586621679246418"><span class="hs-identifier">l</span></a></a><span> </span><a name="local-6989586621679246419"><a href="#local-6989586621679246419"><span class="hs-identifier">ipname</span></a></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><a name="local-6989586621679246420"><a href="#local-6989586621679246420"><span class="hs-identifier">expr</span></a></a><span>
</span><a name="line-142"></a><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">AST.ULocalValBind</span><span>
</span><a name="line-143"></a><span>         </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#annContNoSema"><span class="hs-identifier hs-var">annContNoSema</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">AST.USimpleBind</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#focusOn"><span class="hs-identifier hs-var">focusOn</span></a><span> </span><a href="#local-6989586621679246418"><span class="hs-identifier hs-var">l</span></a><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#annContNoSema"><span class="hs-identifier hs-var">annContNoSema</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">AST.UVarPat</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#define"><span class="hs-identifier hs-var">define</span></a><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Names.html#trfImplicitName"><span class="hs-identifier hs-var">trfImplicitName</span></a><span> </span><a href="#local-6989586621679246419"><span class="hs-identifier hs-var">ipname</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-144"></a><span>                                              </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#annFromNoSema"><span class="hs-identifier hs-var">annFromNoSema</span></a><span> </span><span class="hs-identifier hs-var">AnnEqual</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">AST.UUnguardedRhs</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Exprs.html#trfExpr"><span class="hs-identifier hs-var">trfExpr</span></a><span> </span><a href="#local-6989586621679246420"><span class="hs-identifier hs-var">expr</span></a><span class="hs-special">)</span><span>
</span><a name="line-145"></a><span>                                              </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#nothing"><span class="hs-identifier hs-var">nothing</span></a><span> </span><span class="hs-string">&quot; &quot;</span><span> </span><span class="hs-string">&quot;&quot;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#atTheEnd"><span class="hs-identifier hs-var">atTheEnd</span></a><span class="hs-special">)</span><span>
</span><a name="line-146"></a><span>  </span><span class="hs-identifier hs-var">IPBind</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Right</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#convertionProblem"><span class="hs-identifier hs-var">convertionProblem</span></a><span> </span><span class="hs-string">&quot;trfIpBind: called on typechecked AST&quot;</span><span>
</span><a name="line-147"></a><span>
</span><a name="line-148"></a><span class="hs-identifier">trfLocalSig</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><a name="local-6989586621679246328"><a href="#local-6989586621679246328"><span class="hs-identifier">n</span></a></a><span> </span><a name="local-6989586621679246329"><a href="#local-6989586621679246329"><span class="hs-identifier">r</span></a></a><span> </span><span class="hs-operator">.</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Names.html#TransformName"><span class="hs-identifier hs-type">TransformName</span></a><span> </span><a href="#local-6989586621679246328"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679246329"><span class="hs-identifier hs-type">r</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Located</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Sig</span><span> </span><a href="#local-6989586621679246328"><span class="hs-identifier hs-type">n</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#Trf"><span class="hs-identifier hs-type">Trf</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Ann</span><span> </span><span class="hs-identifier hs-type">AST.ULocalBind</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Dom</span><span> </span><a href="#local-6989586621679246329"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span> </span><span class="hs-identifier hs-type">RangeStage</span><span class="hs-special">)</span><span>
</span><a name="line-149"></a><a name="trfLocalSig"><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfLocalSig"><span class="hs-identifier">trfLocalSig</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#trfLocNoSema"><span class="hs-identifier hs-var">trfLocNoSema</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><a name="line-150"></a><span>  </span><a name="local-6989586621679246421"><a href="#local-6989586621679246421"><span class="hs-identifier">ts</span></a></a><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="hs-identifier hs-var">TypeSig</span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">AST.ULocalSignature</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#annContNoSema"><span class="hs-identifier hs-var">annContNoSema</span></a><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfTypeSig%27"><span class="hs-identifier hs-var">trfTypeSig'</span></a><span> </span><a href="#local-6989586621679246421"><span class="hs-identifier hs-var">ts</span></a><span class="hs-special">)</span><span>
</span><a name="line-151"></a><span>  </span><span class="hs-special">(</span><span class="hs-identifier hs-var">FixSig</span><span> </span><a name="local-6989586621679246422"><a href="#local-6989586621679246422"><span class="hs-identifier">fs</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">AST.ULocalFixity</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#annContNoSema"><span class="hs-identifier hs-var">annContNoSema</span></a><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfFixitySig"><span class="hs-identifier hs-var">trfFixitySig</span></a><span> </span><a href="#local-6989586621679246422"><span class="hs-identifier hs-var">fs</span></a><span class="hs-special">)</span><span>
</span><a name="line-152"></a><span>  </span><span class="hs-special">(</span><span class="hs-identifier hs-var">InlineSig</span><span> </span><a name="local-6989586621679246423"><a href="#local-6989586621679246423"><span class="hs-identifier">name</span></a></a><span> </span><a name="local-6989586621679246424"><a href="#local-6989586621679246424"><span class="hs-identifier">prag</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">AST.ULocalInline</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfInlinePragma"><span class="hs-identifier hs-var">trfInlinePragma</span></a><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679246328"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679246423"><span class="hs-identifier hs-var">name</span></a><span> </span><a href="#local-6989586621679246424"><span class="hs-identifier hs-var">prag</span></a><span>
</span><a name="line-153"></a><span>  </span><a name="local-6989586621679246425"><a href="#local-6989586621679246425"><span class="hs-identifier">d</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#unhandledElement"><span class="hs-identifier hs-var">unhandledElement</span></a><span> </span><span class="hs-string">&quot;local signature&quot;</span><span> </span><a href="#local-6989586621679246425"><span class="hs-identifier hs-var">d</span></a><span>
</span><a name="line-154"></a><span>
</span><a name="line-155"></a><span class="hs-identifier">trfTypeSig</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Names.html#TransformName"><span class="hs-identifier hs-type">TransformName</span></a><span> </span><a href="#local-6989586621679246326"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679246327"><span class="hs-identifier hs-type">r</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Located</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Sig</span><span> </span><a href="#local-6989586621679246326"><span class="hs-identifier hs-type">n</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#Trf"><span class="hs-identifier hs-type">Trf</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Ann</span><span> </span><span class="hs-identifier hs-type">AST.UTypeSignature</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Dom</span><span> </span><a href="#local-6989586621679246327"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span> </span><span class="hs-identifier hs-type">RangeStage</span><span class="hs-special">)</span><span>
</span><a name="line-156"></a><a name="trfTypeSig"><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfTypeSig"><span class="hs-identifier">trfTypeSig</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#trfLocNoSema"><span class="hs-identifier hs-var">trfLocNoSema</span></a><span> </span><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfTypeSig%27"><span class="hs-identifier hs-var">trfTypeSig'</span></a><span>
</span><a name="line-157"></a><span>
</span><a name="line-158"></a><span class="hs-identifier">trfTypeSig'</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><a name="local-6989586621679246324"><a href="#local-6989586621679246324"><span class="hs-identifier">n</span></a></a><span> </span><a name="local-6989586621679246325"><a href="#local-6989586621679246325"><span class="hs-identifier">r</span></a></a><span> </span><span class="hs-operator">.</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Names.html#TransformName"><span class="hs-identifier hs-type">TransformName</span></a><span> </span><a href="#local-6989586621679246324"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679246325"><span class="hs-identifier hs-type">r</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Sig</span><span> </span><a href="#local-6989586621679246324"><span class="hs-identifier hs-type">n</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#Trf"><span class="hs-identifier hs-type">Trf</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">AST.UTypeSignature</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Dom</span><span> </span><a href="#local-6989586621679246325"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span> </span><span class="hs-identifier hs-type">RangeStage</span><span class="hs-special">)</span><span>
</span><a name="line-159"></a><a name="trfTypeSig%27"><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfTypeSig%27"><span class="hs-identifier">trfTypeSig'</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">TypeSig</span><span> </span><a name="local-6989586621679246426"><a href="#local-6989586621679246426"><span class="hs-identifier">names</span></a></a><span> </span><a name="local-6989586621679246427"><a href="#local-6989586621679246427"><span class="hs-identifier">typ</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-160"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#defineTypeVars"><span class="hs-identifier hs-var">defineTypeVars</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">AST.UTypeSignature</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#makeNonemptyList"><span class="hs-identifier hs-var">makeNonemptyList</span></a><span> </span><span class="hs-string">&quot;, &quot;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">mapM</span><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Names.html#trfName"><span class="hs-identifier hs-var">trfName</span></a><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679246324"><span class="hs-identifier hs-type">n</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679246426"><span class="hs-identifier hs-var">names</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Types.html#trfType"><span class="hs-identifier hs-var">trfType</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">hsib_body</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">hswc_body</span><span> </span><a href="#local-6989586621679246427"><span class="hs-identifier hs-var">typ</span></a><span class="hs-special">)</span><span>
</span><a name="line-161"></a><span class="hs-identifier">trfTypeSig'</span><span> </span><a name="local-6989586621679246428"><a href="#local-6989586621679246428"><span class="hs-identifier">ts</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#unhandledElement"><span class="hs-identifier hs-var">unhandledElement</span></a><span> </span><span class="hs-string">&quot;type signature&quot;</span><span> </span><a href="#local-6989586621679246428"><span class="hs-identifier hs-var">ts</span></a><span>
</span><a name="line-162"></a><span>
</span><a name="line-163"></a><span class="hs-identifier">trfFixitySig</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><a name="local-6989586621679246322"><a href="#local-6989586621679246322"><span class="hs-identifier">n</span></a></a><span> </span><a name="local-6989586621679246323"><a href="#local-6989586621679246323"><span class="hs-identifier">r</span></a></a><span> </span><span class="hs-operator">.</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Names.html#TransformName"><span class="hs-identifier hs-type">TransformName</span></a><span> </span><a href="#local-6989586621679246322"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679246323"><span class="hs-identifier hs-type">r</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">FixitySig</span><span> </span><a href="#local-6989586621679246322"><span class="hs-identifier hs-type">n</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#Trf"><span class="hs-identifier hs-type">Trf</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">AST.UFixitySignature</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Dom</span><span> </span><a href="#local-6989586621679246323"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span> </span><span class="hs-identifier hs-type">RangeStage</span><span class="hs-special">)</span><span>
</span><a name="line-164"></a><a name="trfFixitySig"><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfFixitySig"><span class="hs-identifier">trfFixitySig</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">FixitySig</span><span> </span><a name="local-6989586621679246429"><a href="#local-6989586621679246429"><span class="hs-identifier">names</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Fixity</span><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679246430"><a href="#local-6989586621679246430"><span class="hs-identifier">prec</span></a></a><span> </span><a name="local-6989586621679246431"><a href="#local-6989586621679246431"><span class="hs-identifier">dir</span></a></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-165"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><a name="local-6989586621679246435"><a href="#local-6989586621679246435"><span class="hs-identifier">precLoc</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#tokenLoc"><span class="hs-identifier hs-var">tokenLoc</span></a><span> </span><span class="hs-identifier hs-var">AnnVal</span><span> </span><span class="hs-comment">-- the precedence token or one of the names</span><span>
</span><a name="line-166"></a><span>       </span><span class="hs-identifier hs-var">AST.UFixitySignature</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="#local-6989586621679246432"><span class="hs-identifier hs-var">transformDir</span></a><span> </span><a href="#local-6989586621679246431"><span class="hs-identifier hs-var">dir</span></a><span>
</span><a name="line-167"></a><span>                            </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="hs-identifier hs-var">isGoodSrcSpan</span><span> </span><a href="#local-6989586621679246435"><span class="hs-identifier hs-var">precLoc</span></a><span> </span><span class="hs-operator hs-var">&amp;&amp;</span><span> </span><span class="hs-identifier hs-var">all</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">srcSpanEnd</span><span> </span><a href="#local-6989586621679246435"><span class="hs-identifier hs-var">precLoc</span></a><span> </span><span class="hs-operator hs-var">&lt;</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">map</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">srcSpanStart</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">getLoc</span><span class="hs-special">)</span><span> </span><a href="#local-6989586621679246429"><span class="hs-identifier hs-var">names</span></a><span class="hs-special">)</span><span>
</span><a name="line-168"></a><span>                                   </span><span class="hs-keyword">then</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#makeJust"><span class="hs-identifier hs-var">makeJust</span></a><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#annLocNoSema"><span class="hs-identifier hs-var">annLocNoSema</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">return</span><span> </span><a href="#local-6989586621679246435"><span class="hs-identifier hs-var">precLoc</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">pure</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">AST.Precedence</span><span> </span><a href="#local-6989586621679246430"><span class="hs-identifier hs-var">prec</span></a><span class="hs-special">)</span><span>
</span><a name="line-169"></a><span>                                                                                         </span><span class="hs-comment">-- names cannot be empty</span><span>
</span><a name="line-170"></a><span>                                   </span><span class="hs-keyword">else</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#nothing"><span class="hs-identifier hs-var">nothing</span></a><span> </span><span class="hs-string">&quot;&quot;</span><span> </span><span class="hs-string">&quot; &quot;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">srcSpanStart</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">getLoc</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">head</span><span> </span><a href="#local-6989586621679246429"><span class="hs-identifier hs-var">names</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-171"></a><span>                            </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#nonemptyAnnList"><span class="hs-identifier hs-var">nonemptyAnnList</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">nubBy</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-operator hs-var">==</span><span class="hs-special">)</span><span> </span><span class="hs-special">`</span><span class="hs-identifier hs-var">on</span><span class="hs-special">`</span><span> </span><span class="hs-identifier hs-var">AST.getRange</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><span class="hs-identifier hs-var">mapM</span><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Names.html#trfOperator"><span class="hs-identifier hs-var">trfOperator</span></a><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679246322"><span class="hs-identifier hs-type">n</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679246429"><span class="hs-identifier hs-var">names</span></a><span class="hs-special">)</span><span>
</span><a name="line-172"></a><span>  </span><span class="hs-keyword">where</span><span> </span><a name="local-6989586621679246432"><a href="#local-6989586621679246432"><span class="hs-identifier">transformDir</span></a></a><span> </span><span class="hs-identifier hs-var">InfixL</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679246433"><span class="hs-identifier hs-var">directionChar</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">pure</span><span> </span><span class="hs-identifier hs-var">AST.AssocLeft</span><span class="hs-special">)</span><span>
</span><a name="line-173"></a><span>        </span><span class="hs-identifier">transformDir</span><span> </span><span class="hs-identifier hs-var">InfixR</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679246433"><span class="hs-identifier hs-var">directionChar</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">pure</span><span> </span><span class="hs-identifier hs-var">AST.AssocRight</span><span class="hs-special">)</span><span>
</span><a name="line-174"></a><span>        </span><span class="hs-identifier">transformDir</span><span> </span><span class="hs-identifier hs-var">InfixN</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#annLocNoSema"><span class="hs-identifier hs-var">annLocNoSema</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">srcLocSpan</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">srcSpanEnd</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#tokenLoc"><span class="hs-identifier hs-var">tokenLoc</span></a><span> </span><span class="hs-identifier hs-var">AnnInfix</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">pure</span><span> </span><span class="hs-identifier hs-var">AST.AssocNone</span><span class="hs-special">)</span><span>
</span><a name="line-175"></a><span>
</span><a name="line-176"></a><span>        </span><a name="local-6989586621679246433"><a href="#local-6989586621679246433"><span class="hs-identifier">directionChar</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#annLocNoSema"><span class="hs-identifier hs-var">annLocNoSema</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-glyph">\</span><a name="local-6989586621679246434"><a href="#local-6989586621679246434"><span class="hs-identifier">l</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">mkSrcSpan</span><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#updateCol"><span class="hs-identifier hs-var">updateCol</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">subtract</span><span> </span><span class="hs-number">1</span><span class="hs-special">)</span><span> </span><a href="#local-6989586621679246434"><span class="hs-identifier hs-var">l</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679246434"><span class="hs-identifier hs-var">l</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">srcSpanEnd</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#tokenLoc"><span class="hs-identifier hs-var">tokenLoc</span></a><span> </span><span class="hs-identifier hs-var">AnnInfix</span><span class="hs-special">)</span><span>
</span><a name="line-177"></a><span>
</span><a name="line-178"></a><span class="hs-identifier">trfInlinePragma</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><a name="local-6989586621679246320"><a href="#local-6989586621679246320"><span class="hs-identifier">n</span></a></a><span> </span><a name="local-6989586621679246321"><a href="#local-6989586621679246321"><span class="hs-identifier">r</span></a></a><span> </span><span class="hs-operator">.</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Names.html#TransformName"><span class="hs-identifier hs-type">TransformName</span></a><span> </span><a href="#local-6989586621679246320"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679246321"><span class="hs-identifier hs-type">r</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Located</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">IdP</span><span> </span><a href="#local-6989586621679246320"><span class="hs-identifier hs-type">n</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">InlinePragma</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#Trf"><span class="hs-identifier hs-type">Trf</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Ann</span><span> </span><span class="hs-identifier hs-type">AST.UInlinePragma</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Dom</span><span> </span><a href="#local-6989586621679246321"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span> </span><span class="hs-identifier hs-type">RangeStage</span><span class="hs-special">)</span><span>
</span><a name="line-179"></a><a name="trfInlinePragma"><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfInlinePragma"><span class="hs-identifier">trfInlinePragma</span></a></a><span> </span><a name="local-6989586621679246436"><a href="#local-6989586621679246436"><span class="hs-identifier">name</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">InlinePragma</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier hs-var">Inlinable</span><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679246437"><a href="#local-6989586621679246437"><span class="hs-identifier">phase</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span>
</span><a name="line-180"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#annContNoSema"><span class="hs-identifier hs-var">annContNoSema</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">AST.UInlinablePragma</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfPhase"><span class="hs-identifier hs-var">trfPhase</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">pure</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">srcSpanStart</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">getLoc</span><span> </span><a href="#local-6989586621679246436"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679246437"><span class="hs-identifier hs-var">phase</span></a><span> </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Names.html#trfName"><span class="hs-identifier hs-var">trfName</span></a><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679246320"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679246436"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">)</span><span>
</span><a name="line-181"></a><span class="hs-identifier">trfInlinePragma</span><span> </span><a name="local-6989586621679246438"><a href="#local-6989586621679246438"><span class="hs-identifier">name</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">InlinePragma</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier hs-var">NoInline</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#annContNoSema"><span class="hs-identifier hs-var">annContNoSema</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">AST.UNoInlinePragma</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Names.html#trfName"><span class="hs-identifier hs-var">trfName</span></a><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679246320"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679246438"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">)</span><span>
</span><a name="line-182"></a><span class="hs-identifier">trfInlinePragma</span><span> </span><a name="local-6989586621679246439"><a href="#local-6989586621679246439"><span class="hs-identifier">name</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">InlinePragma</span><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.GHCUtils.html#fromSrcText"><span class="hs-identifier hs-var">fromSrcText</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a name="local-6989586621679246440"><a href="#local-6989586621679246440"><span class="hs-identifier">src</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-identifier hs-var">Inline</span><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679246441"><a href="#local-6989586621679246441"><span class="hs-identifier">phase</span></a></a><span> </span><a name="local-6989586621679246442"><a href="#local-6989586621679246442"><span class="hs-identifier">cl</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-183"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#annContNoSema"><span class="hs-identifier hs-var">annContNoSema</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-keyword">do</span><span> </span><a name="local-6989586621679246443"><a href="#local-6989586621679246443"><span class="hs-identifier">rng</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">asks</span><span> </span><span class="hs-identifier">contRange</span><span>
</span><a name="line-184"></a><span>                       </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621679246444"><a href="#local-6989586621679246444"><span class="hs-identifier">parts</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">map</span><span> </span><span class="hs-identifier hs-var">getLoc</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#splitLocated"><span class="hs-identifier hs-var">splitLocated</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">L</span><span> </span><a href="#local-6989586621679246443"><span class="hs-identifier hs-var">rng</span></a><span> </span><a href="#local-6989586621679246440"><span class="hs-identifier hs-var">src</span></a><span class="hs-special">)</span><span>
</span><a name="line-185"></a><span>                       </span><span class="hs-identifier hs-var">AST.UInlinePragma</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfConlike"><span class="hs-identifier hs-var">trfConlike</span></a><span> </span><a href="#local-6989586621679246444"><span class="hs-identifier hs-var">parts</span></a><span> </span><a href="#local-6989586621679246442"><span class="hs-identifier hs-var">cl</span></a><span>
</span><a name="line-186"></a><span>                                         </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfPhase"><span class="hs-identifier hs-var">trfPhase</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">pure</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">srcSpanStart</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">getLoc</span><span> </span><a href="#local-6989586621679246439"><span class="hs-identifier hs-var">name</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><a href="#local-6989586621679246441"><span class="hs-identifier hs-var">phase</span></a><span>
</span><a name="line-187"></a><span>                                         </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Names.html#trfName"><span class="hs-identifier hs-var">trfName</span></a><span> </span><span class="hs-glyph">@</span><a href="#local-6989586621679246320"><span class="hs-identifier hs-type">n</span></a><span> </span><a href="#local-6989586621679246439"><span class="hs-identifier hs-var">name</span></a><span>
</span><a name="line-188"></a><span>
</span><a name="line-189"></a><span class="hs-identifier">trfPhase</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#Trf"><span class="hs-identifier hs-type">Trf</span></a><span> </span><span class="hs-identifier hs-type">SrcLoc</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Activation</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#Trf"><span class="hs-identifier hs-type">Trf</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">AnnMaybeG</span><span> </span><span class="hs-identifier hs-type">AST.UPhaseControl</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Dom</span><span> </span><a href="#local-6989586621679246319"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span> </span><span class="hs-identifier hs-type">RangeStage</span><span class="hs-special">)</span><span>
</span><a name="line-190"></a><a name="trfPhase"><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfPhase"><span class="hs-identifier">trfPhase</span></a></a><span> </span><a name="local-6989586621679246445"><a href="#local-6989586621679246445"><span class="hs-identifier">l</span></a></a><span> </span><span class="hs-identifier hs-var">AlwaysActive</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#nothing"><span class="hs-identifier hs-var">nothing</span></a><span> </span><span class="hs-string">&quot; &quot;</span><span> </span><span class="hs-string">&quot;&quot;</span><span> </span><a href="#local-6989586621679246445"><span class="hs-identifier hs-var">l</span></a><span>
</span><a name="line-191"></a><span class="hs-identifier">trfPhase</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">ActiveAfter</span><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679246446"><a href="#local-6989586621679246446"><span class="hs-identifier">pn</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#makeJust"><span class="hs-identifier hs-var">makeJust</span></a><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#annLocNoSema"><span class="hs-identifier hs-var">annLocNoSema</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">combineSrcSpans</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#tokenLoc"><span class="hs-identifier hs-var">tokenLoc</span></a><span> </span><span class="hs-identifier hs-var">AnnOpenS</span><span> </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#tokenLoc"><span class="hs-identifier hs-var">tokenLoc</span></a><span> </span><span class="hs-identifier hs-var">AnnCloseS</span><span class="hs-special">)</span><span>
</span><a name="line-192"></a><span>                                                          </span><span class="hs-special">(</span><span class="hs-identifier hs-var">AST.UPhaseControl</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#nothing"><span class="hs-identifier hs-var">nothing</span></a><span> </span><span class="hs-string">&quot;&quot;</span><span> </span><span class="hs-string">&quot;&quot;</span><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#before"><span class="hs-identifier hs-var">before</span></a><span> </span><span class="hs-identifier hs-var">AnnCloseS</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#makeJust"><span class="hs-identifier hs-var">makeJust</span></a><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfPhaseNum"><span class="hs-identifier hs-var">trfPhaseNum</span></a><span> </span><a href="#local-6989586621679246446"><span class="hs-identifier hs-var">pn</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-193"></a><span class="hs-identifier">trfPhase</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">ActiveBefore</span><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679246447"><a href="#local-6989586621679246447"><span class="hs-identifier">pn</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#makeJust"><span class="hs-identifier hs-var">makeJust</span></a><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#annLocNoSema"><span class="hs-identifier hs-var">annLocNoSema</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">combineSrcSpans</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#tokenLoc"><span class="hs-identifier hs-var">tokenLoc</span></a><span> </span><span class="hs-identifier hs-var">AnnOpenS</span><span> </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#tokenLoc"><span class="hs-identifier hs-var">tokenLoc</span></a><span> </span><span class="hs-identifier hs-var">AnnCloseS</span><span class="hs-special">)</span><span>
</span><a name="line-194"></a><span>                                                           </span><span class="hs-special">(</span><span class="hs-identifier hs-var">AST.UPhaseControl</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#makeJust"><span class="hs-identifier hs-var">makeJust</span></a><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#annLocNoSema"><span class="hs-identifier hs-var">annLocNoSema</span></a><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#tokenLoc"><span class="hs-identifier hs-var">tokenLoc</span></a><span> </span><span class="hs-identifier hs-var">AnnTilde</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">pure</span><span> </span><span class="hs-identifier hs-var">AST.PhaseInvert</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#makeJust"><span class="hs-identifier hs-var">makeJust</span></a><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfPhaseNum"><span class="hs-identifier hs-var">trfPhaseNum</span></a><span> </span><a href="#local-6989586621679246447"><span class="hs-identifier hs-var">pn</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-195"></a><span class="hs-identifier">trfPhase</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier hs-var">NeverActive</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#makeJust"><span class="hs-identifier hs-var">makeJust</span></a><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#annLocNoSema"><span class="hs-identifier hs-var">annLocNoSema</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">combineSrcSpans</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#tokenLoc"><span class="hs-identifier hs-var">tokenLoc</span></a><span> </span><span class="hs-identifier hs-var">AnnOpenS</span><span> </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#tokenLoc"><span class="hs-identifier hs-var">tokenLoc</span></a><span> </span><span class="hs-identifier hs-var">AnnCloseS</span><span class="hs-special">)</span><span>
</span><a name="line-196"></a><span>                                                   </span><span class="hs-special">(</span><span class="hs-identifier hs-var">AST.UPhaseControl</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#makeJust"><span class="hs-identifier hs-var">makeJust</span></a><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#annLocNoSema"><span class="hs-identifier hs-var">annLocNoSema</span></a><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#tokenLoc"><span class="hs-identifier hs-var">tokenLoc</span></a><span> </span><span class="hs-identifier hs-var">AnnTilde</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">pure</span><span> </span><span class="hs-identifier hs-var">AST.PhaseInvert</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&lt;*&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#nothing"><span class="hs-identifier hs-var">nothing</span></a><span> </span><span class="hs-string">&quot; &quot;</span><span> </span><span class="hs-string">&quot;&quot;</span><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#after"><span class="hs-identifier hs-var">after</span></a><span> </span><span class="hs-identifier hs-var">AnnTilde</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-197"></a><span>
</span><a name="line-198"></a><span class="hs-identifier">trfPhaseNum</span><span> </span><span class="hs-glyph">::</span><span>  </span><span class="hs-identifier hs-type">PhaseNum</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#Trf"><span class="hs-identifier hs-type">Trf</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Ann</span><span> </span><span class="hs-identifier hs-type">AST.PhaseNumber</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Dom</span><span> </span><a href="#local-6989586621679246318"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span> </span><span class="hs-identifier hs-type">RangeStage</span><span class="hs-special">)</span><span>
</span><a name="line-199"></a><a name="trfPhaseNum"><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfPhaseNum"><span class="hs-identifier">trfPhaseNum</span></a></a><span> </span><a name="local-6989586621679246448"><a href="#local-6989586621679246448"><span class="hs-identifier">i</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#annLocNoSema"><span class="hs-identifier hs-var">annLocNoSema</span></a><span> </span><span class="hs-special">(</span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#tokenLoc"><span class="hs-identifier hs-var">tokenLoc</span></a><span> </span><span class="hs-identifier hs-var">AnnVal</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">pure</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">AST.PhaseNumber</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">fromIntegral</span><span> </span><a href="#local-6989586621679246448"><span class="hs-identifier hs-var">i</span></a><span class="hs-special">)</span><span>
</span><a name="line-200"></a><span>
</span><a name="line-201"></a><span class="hs-identifier">trfConlike</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">SrcSpan</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">RuleMatchInfo</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Monad.html#Trf"><span class="hs-identifier hs-type">Trf</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">AnnMaybeG</span><span> </span><span class="hs-identifier hs-type">AST.UConlikeAnnot</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Dom</span><span> </span><a href="#local-6989586621679246317"><span class="hs-identifier hs-type">r</span></a><span class="hs-special">)</span><span> </span><span class="hs-identifier hs-type">RangeStage</span><span class="hs-special">)</span><span>
</span><a name="line-202"></a><a name="trfConlike"><a href="Language.Haskell.Tools.BackendGHC.Binds.html#trfConlike"><span class="hs-identifier">trfConlike</span></a></a><span> </span><a name="local-6989586621679246449"><a href="#local-6989586621679246449"><span class="hs-identifier">parts</span></a></a><span> </span><span class="hs-identifier hs-var">ConLike</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">length</span><span> </span><a href="#local-6989586621679246449"><span class="hs-identifier hs-var">parts</span></a><span> </span><span class="hs-operator hs-var">&gt;</span><span> </span><span class="hs-number">2</span><span>
</span><a name="line-203"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#makeJust"><span class="hs-identifier hs-var">makeJust</span></a><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#annLocNoSema"><span class="hs-identifier hs-var">annLocNoSema</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">pure</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679246449"><span class="hs-identifier hs-var">parts</span></a><span> </span><span class="hs-operator hs-var">!!</span><span> </span><span class="hs-number">2</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">pure</span><span> </span><span class="hs-identifier hs-var">AST.UConlikeAnnot</span><span class="hs-special">)</span><span>
</span><a name="line-204"></a><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">otherwise</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#convertionProblem"><span class="hs-identifier hs-var">convertionProblem</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-string">&quot;trfConlike: expected 3 parts, got: &quot;</span><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-identifier hs-var">show</span><span> </span><a href="#local-6989586621679246449"><span class="hs-identifier hs-var">parts</span></a><span>
</span><a name="line-205"></a><span class="hs-identifier">trfConlike</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">_</span><span class="hs-glyph">:</span><a name="local-6989586621679246450"><a href="#local-6989586621679246450"><span class="hs-identifier">inlTok</span></a></a><span class="hs-glyph">:</span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-identifier hs-var">FunLike</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#nothing"><span class="hs-identifier hs-var">nothing</span></a><span> </span><span class="hs-string">&quot; &quot;</span><span> </span><span class="hs-string">&quot;&quot;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">pure</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">srcSpanEnd</span><span> </span><a href="#local-6989586621679246450"><span class="hs-identifier hs-var">inlTok</span></a><span class="hs-special">)</span><span>
</span><a name="line-206"></a><span class="hs-identifier">trfConlike</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679246451"><a href="#local-6989586621679246451"><span class="hs-identifier">combTok</span></a></a><span class="hs-glyph">:</span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-identifier hs-var">FunLike</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Language.Haskell.Tools.BackendGHC.Utils.html#nothing"><span class="hs-identifier hs-var">nothing</span></a><span> </span><span class="hs-string">&quot; &quot;</span><span> </span><span class="hs-string">&quot;&quot;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">pure</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">srcSpanEnd</span><span> </span><a href="#local-6989586621679246451"><span class="hs-identifier hs-var">combTok</span></a><span class="hs-special">)</span><span>
</span><a name="line-207"></a></pre></body></html>